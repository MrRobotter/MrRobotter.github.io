<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="JoinYon&#39;s Blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://joinyon.top">
    <!--SEO-->



<meta name="keywords" content="张俊阳"/>



<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->


<title>ISO8583 | JoinYon&#39;s Blog</title>


    <link rel="alternate" href="/atom.xml" title="JoinYon&#39;s Blog" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    



    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?a8c8b303b74043f999d08243b00df898";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>



    
</head>


<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(https://github.com/twoyao/beautiful-hexo/blob/master/source/bigimgs/01.jpg?raw=true)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='JoinYon'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                 <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>主页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/Android"><i class="fa "></i>Android</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/技术"><i class="fa "></i>技术</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/工具"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/区块链"><i class="fa "></i>区块链</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/资讯"><i class="fa "></i>资讯</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/生活"><i class="fa "></i>生活</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/about"><i class="fa "></i>关于</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="ISO8583">
            
	            ISO8583
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/Android">
            Android
        </a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <a href="/tags/知识点" title='知识点'>
                        知识点
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2018/12/22</span>
        </span>
    
</div>

            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>331</strong>天之前发表，文中内容可能已经过时。
            </p>
        
    </div>
    
    <div class="post-body post-content">
        <h3 id="支付小常识"><a href="#支付小常识" class="headerlink" title="支付小常识"></a><a href="https://dev.tencent.com/u/yang888/p/Diary/git/blob/master/2018/pay/%E6%94%AF%E4%BB%98%E5%B0%8F%E5%B8%B8%E8%AF%86.md" target="_blank" rel="noopener">支付小常识</a></h3><h3 id="银联终端规范"><a href="#银联终端规范" class="headerlink" title="银联终端规范"></a><a href="https://dev.tencent.com/u/yang888/p/Diary/git/blob/master/2018/pay/%E9%93%B6%E8%81%94%E7%BB%88%E7%AB%AF%E8%A7%84%E8%8C%83.md" target="_blank" rel="noopener">银联终端规范</a></h3><h3 id="8583报文手动组包"><a href="#8583报文手动组包" class="headerlink" title="8583报文手动组包"></a><a href="https://blog.csdn.net/maxwoods/article/details/78840280" target="_blank" rel="noopener">8583报文手动组包</a></h3><h3 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h3><ul>
<li>ISO8583消息可以被编码为ASCII或二进制，ASCII是比较常见的。在这种格式中，消息类型是4个字节长，因为它发送的字符文本，即。 “0200”。消息类型是二进制编码，2个字节长，例如信息类型0200被编码为字节0x02和0x00写入。</li>
<li></li>
</ul>
<h4 id="报文组成"><a href="#报文组成" class="headerlink" title="报文组成:"></a>报文组成:</h4><p>报文头【长度（2字节）+TPDU（5字节）+报文版本号（2字节）】+信息类型+位图+数据</p>
<ul>
<li>报文长度：整体报文长度 -报文头中的2字节长度。如8583整体报文长度为100，那么报文长度为98.用两字节的BCD码表示（16进制）为0062。</li>
<li>报文中容易出错的在于银联规范中的各种数据格式，定长、变长、ASCII变长、以及TLV格式等。在组包或者解包前，仔细看规范是十分重要的。</li>
<li>报文 是十六进制<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">012F //报文长度 303个字节长度 </span><br><span class="line">6005010000 //APP_TPDU</span><br><span class="line">603200321301 //Hearder</span><br><span class="line">0200 //信息类型</span><br><span class="line">7024068020C08A33 //位图</span><br><span class="line">16 6214835892690379 //LV 长度-值 主账号</span><br><span class="line">000000</span><br><span class="line">000000000001</span><br><span class="line">000045</span><br><span class="line">2607</span><br><span class="line">072</span><br><span class="line">000</span><br><span class="line">00</span><br><span class="line">00</span><br><span class="line">37 6214835892690379D26072201493900486656</span><br><span class="line">03130303</span><br><span class="line">036303439313132333330313730313130303036313536060000000000000001349F2608FC9AA64AF938FB069F2701809F101307011703A00000010A010000000000ABB4EC9B9F3704C3C302089F36020055950500000000009A031908199C01009F02060000000000015F2A02015682027C009F1A0201569F03060000000000009F3303E0F1C89F3501229F1E0830383230303230318408A0000003330101019F41043030303000404132303335303130303230343032303130303832303032303131393035303038333230303031202000142200000100060000033031203034413941393735</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">0144 </span><br><span class="line"></span><br><span class="line">6005010000	// APP_TPDU</span><br><span class="line"></span><br><span class="line">603200321301 //Hearder</span><br><span class="line"></span><br><span class="line">0200</span><br><span class="line">7024068020C08A33</span><br><span class="line">19</span><br><span class="line">6230780100013423125</span><br><span class="line">0000000</span><br><span class="line">000000000001</span><br><span class="line">000050</span><br><span class="line">2612</span><br><span class="line">072</span><br><span class="line">000</span><br><span class="line">01</span><br><span class="line">00</span><br><span class="line">37 6230780100013423125D26122202961800001</span><br><span class="line">0</span><br><span class="line">3130303036303439</span><br><span class="line">313132333330313730313130303036</span><br><span class="line">313536</span><br><span class="line">0600000000000000</span><br><span class="line">0153  </span><br><span class="line">9F26 08FD1E09B83B3EA951</span><br><span class="line">9F27 01809F101307010103A00000040A0100000000004E22819F9F3704D26D85649F36020902950500000000009A031908199C01009F02060000000000015F2A020</span><br><span class="line"></span><br><span class="line">15682027C009F1A0201569F03060000000000009F3303E0F1C89F3501229F1E0830383230303230318408A0000003330101019F4104303030309F63103033313130303030000000000000000000404132303335303130303230343032303130303832303</span><br><span class="line"></span><br><span class="line">03230313139303530303833323030303120200014</span><br><span class="line"></span><br><span class="line">22 000001 000 600000</span><br><span class="line"></span><br><span class="line">33031204544454144443742</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="报文头"><a href="#报文头" class="headerlink" title="报文头"></a>报文头</h4><ul>
<li><p>TPDU TPDU决定了终端与系统之间的网络协议. TPDU是一个10位的数字, 实际传输的报文, 有些用ASCII表示这10位数字, 有些用BCD表示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">6000040000</span><br><span class="line">0144600501</span><br></pre></td></tr></table></figure>
<h4 id="信息类型"><a href="#信息类型" class="headerlink" title="信息类型"></a>信息类型</h4><ul>
<li>这个是信息类型(MTI), 是一个四位的数字, 这里为”0200”, 传输时用BCD表示即为”02h,00h”(如果用ASCII呢？看看上面的内容). 这个四位数字，每一位都有它的意义,</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0200</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="位图-bitmap"><a href="#位图-bitmap" class="headerlink" title="位图(bitmap)"></a>位图(bitmap)</h4><ul>
<li><p>指示哪些域存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;70 24 06 80 20 C0 8A 33&gt; 16进制</span><br><span class="line"></span><br><span class="line">0111000000100100000001101000000000100000110000001000101000110011</span><br><span class="line">0111000000100100000001101000000000100000110000001000101000110011</span><br></pre></td></tr></table></figure>
</li>
<li><p>有数据的域:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">h  长度   			</span><br><span class="line">2  主账号 			N..19 最大19位BCD编码左对齐 6230780100013423125 ？</span><br><span class="line">3  交易处理码     	N6 BCD 文档标注6个0  000000</span><br><span class="line">4  交易金额 			N12 BCD 00000000001 单位分 ？</span><br><span class="line">11 流水号  			N6 BCD  000050</span><br><span class="line">14 卡有效期 			N4 BCD YYMM 2612</span><br><span class="line">22 服务点输入方式码  	N3 BCD 072</span><br><span class="line">23 卡序列号 			N3 BCD 000</span><br><span class="line">25 服务点条件码		N2 BCD 00</span><br><span class="line">35 2磁道数据			z37 BCD 6214835892690379D26072201493900486656</span><br><span class="line">41 受卡机终端标识码    ans8 ASCII  31 30 30 30 36 30 34 39 -&gt;10006049(终端代码)</span><br><span class="line">42 受卡方标识码       ans15 ASCII 31 31 32 33 33 30 31 37 30 31 31 30 30 30 36 -&gt;112330170110006(商户号)</span><br><span class="line">49 交易货币代码 		an3 ASCII  313536  -&gt;156 (人民币)</span><br><span class="line">53 安全控制信息 		N16 BCD 0600000000000000</span><br><span class="line">55 IC 卡数据域  		最大255字节数据 </span><br><span class="line">59</span><br><span class="line">60                       22 000001 000 </span><br><span class="line">63 自定义域			ans…003 ASCII 60 00 00  </span><br><span class="line">64 MAC   			b64  BINARY</span><br></pre></td></tr></table></figure>
</li>
<li><p>what?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">60001000000100008000080000000000000430</span><br></pre></td></tr></table></figure>
</li>
<li><p>扫码交易 send</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>扫码交易 rec</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">60000400006010000201090210303806800AC0813700000000000000000100008223324208200320000100313030303030303030303336434431303030363034393131323333303137303131303030363135360004B3C9B9A600634132303335303130303230343032303130303832303032303131393035303038333230303031202041333031383133343632373432393931353133343436320011900000010000003935463132303332353833384634323546443430343041423844443934413035323037324432453700034355504438304537304439</span><br></pre></td></tr></table></figure>
<pre><code>解析 
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">6000040000601000020109 //</span><br><span class="line"></span><br><span class="line">0210 //</span><br><span class="line"></span><br><span class="line">30 38 06 80 0A C0 81 37</span><br><span class="line">&lt;0011000000111000000001101000000000001010110000001000000100110111&gt;</span><br><span class="line"></span><br><span class="line">00000000000000000100008223324208200320000100313030303030303030303336434431303030363034393131323333303137303131303030363135360004B3C9B9A600634132303335303130303230343032303130303832303032303131393035303038333230303031202041333031383133343632373432393931353133343436320011900000010000003935463132303332353833384634323546443430343041423844443934413035323037324432453700034355504438304537304439</span><br></pre></td></tr></table></figure>
<ul>
<li>扫码撤销 send</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">00E4600501000060320032130102003020048008C0803D000000000000000001000084032000313030303030303030303336313030303630343931313233333031373031313030303631353600374134303332353833384634323546443430343041423844443934413035323037324432453700119200000100000012000001000082008935463033363233333430353546303230355758504159354630343631393038323035463132303332353833384634323546443430343041423844443934413035323037324432453735463135303134303832303233333234324246314539444442</span><br></pre></td></tr></table></figure>
<ul>
<li>扫码撤销 rec</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">60000400006010000201090210303804800AC0813F0000000000000000010000842334100820032000313030303030303030303336303031303030363034393131323333303137303131303030363135360008BDD3CAD5B3C9B9A600374134303332353833384634323546443430343041423844443934413035323037324432453700119200000100000012000001000082003935463132303332423245383732414244333230343141414135324338413830323031394242374500034355503937384230413039</span><br></pre></td></tr></table></figure>
    </div>

    <div class="post-footer">
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2019/02/18/Java基础知识汇总/" class="pre-post btn btn-default" title='Java基础知识汇总'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">Java基础知识汇总</span>
        </a>
    
    
        <a href="/2018/11/18/AppBarLayout-CollapsingToolBarLayout-Tablayout-ViewPager使用遇到的问题及解决方案/" class="next-post btn btn-default" title='AppBarLayout+CollapsingToolBarLayout+Tablayout+ViewPager使用遇到的问题及解决方案'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">AppBarLayout+CollapsingToolBarLayout+Tablayout+ViewPager使用遇到的问题及解决方案</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
<div id="lv-container" data-id="city" data-uid="MTAyMC8zNzEzNC8xMzY2OA">
  <script type="text/javascript">
     (function(d, s) {
         var j, e = d.getElementsByTagName(s)[0];
         if (typeof LivereTower === 'function') { return; }
         j = d.createElement(s);
         j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
         j.async = true;
         e.parentNode.insertBefore(j, e);
     })(document, 'script');
  </script>
</div>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#背景"><span class="toc-text">背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查阅资料"><span class="toc-text">查阅资料</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#调用过程"><span class="toc-text">调用过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol>
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<!--<a id="toc-btn">
    <i class="fa fa-bars"></i>
</a>-->

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2017
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



	<script src="/js/search.js?rev=@@hash"></script>


<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>