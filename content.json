{"meta":{"title":"JoinYon's Blog","subtitle":"一个会思考的机器人","description":null,"author":"JoinYon","url":"http://joinyon.top"},"pages":[{"title":"关于我","date":"2018-06-07T06:09:01.000Z","updated":"2018-09-25T08:22:37.551Z","comments":true,"path":"about/index.html","permalink":"http://joinyon.top/about/index.html","excerpt":"","text":"码农一枚，现居杭州。 座右铭 你是这个世界上独一无二的。 存在的就是合理的。 还没有第三条，等着我去发现。 交友宣言喜欢以茶会友，交朋友是拓展自己见闻的有效途径。 联系方式 关注我 新浪微博 GitHub coding.net 兴趣爱好我只是一个会coding的程序猿，我还有一些特殊爱好： 读书（微信读书，欢迎和我互相关注，点赞哦！） 写作（文笔不好，七八九流的，自我娱乐） 炒币（山寨币，虚拟币，梦想还是有的，说不定哪天财富自由了，偷笑。。。） 游泳（没有正规训练过，释放心情的好去处） 吃货（没有什么比美食诱人了）简历"},{"title":"categories","date":"2018-06-07T05:46:07.000Z","updated":"2018-06-07T05:47:48.514Z","comments":true,"path":"categories/index.html","permalink":"http://joinyon.top/categories/index.html","excerpt":"","text":""},{"title":"工具","date":"2018-06-08T06:34:46.000Z","updated":"2018-06-08T06:36:23.319Z","comments":true,"path":"resources/index.html","permalink":"http://joinyon.top/resources/index.html","excerpt":"","text":""},{"title":"标签","date":"2018-06-07T05:41:48.000Z","updated":"2018-06-07T05:43:57.562Z","comments":true,"path":"tags/index.html","permalink":"http://joinyon.top/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"关于Gson解析异常","slug":"关于Gson解析异常","date":"2019-06-21T02:24:57.000Z","updated":"2019-06-21T02:41:51.545Z","comments":true,"path":"2019/06/21/关于Gson解析异常/","link":"","permalink":"http://joinyon.top/2019/06/21/关于Gson解析异常/","excerpt":"","text":"报错信息1Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 1 path $ 报错原因 GsonConverterFactory使用时需要返回规范的JSON，而服务端没有按照标准返回。 解决办法12345678910111213141516static Retrofit getClient() &#123; Gson gson = new GsonBuilder() .setLenient() .create(); if (retrofit == null) &#123; retrofit = new Retrofit.Builder() .baseUrl(BASE_URL) .addConverterFactory(GsonConverterFactory.create(gson)) .build(); &#125; return retrofit;&#125;//GsonConverterFactory.create(gson)不使用默认的，使用带参数的。","categories":[],"tags":[],"keywords":[]},{"title":"adb命令大全","slug":"adb命令大全","date":"2019-06-12T08:28:31.000Z","updated":"2019-06-12T08:34:19.245Z","comments":true,"path":"2019/06/12/adb命令大全/","link":"","permalink":"http://joinyon.top/2019/06/12/adb命令大全/","excerpt":"","text":"","categories":[],"tags":[{"name":"技术","slug":"技术","permalink":"http://joinyon.top/tags/技术/"}],"keywords":[]},{"title":"日志","slug":"日志","date":"2019-06-10T11:58:57.000Z","updated":"2019-09-27T06:37:18.912Z","comments":true,"path":"2019/06/10/日志/","link":"","permalink":"http://joinyon.top/2019/06/10/日志/","excerpt":"","text":"六月10 星期一 A920扫码提示 device not licensed 同样的程序调用的扫码器不一样 CortexScan paxScanner 扫码预授权调试 跟踪天喻收单程序进度 跟踪核销模块开发进度 java基础03 11 星期二 核销业务梳理 MTMS客户端秘钥丢失问题解决并反馈给厂商,厂商会优化解决方案 A920扫码问题解决方案:多重启几次 12 星期三 培训知识巩固 核销开发进度跟踪 天喻瑞银信收单进度:开发版已出，明天测试功能 java基础分支语句查看 13 星期四 瑞银信新增终端 java循环语句 N910固件升级实践及操作文档编写 天喻瑞银信和丰付机器不能通用 14 星期五 启航的机器无法升级系统寄回 诚付的程序定制和轮播上线 考试计划 15 星期六 java方法 云音响的配置方法 启航机器升级系统回寄 E350非接版无法安装的问题(缺少了驱动) 大崃的QR68机器归还 16 星期日 递归算法 17 星期一 面向对象(一) 天喻瑞银信配置(贴牌的SN和代码获取的SN不一致) 何泽的加油站商户扫码闪退，更新程序后依然闪退，关机重启后解决。 合利宝撤销报25渠道没有记录 运营基础知识考核 运动18 星期二 天喻瑞银信SDK测试反馈 E350老版本机器程序不支持 核销问题解决19 星期三 N910走联动536渠道预授权借记卡要求输入密码，有些卡密码可以随便输入，有些卡需要输入正确的密码 灌机30台 联动SDK支持修改小票打印名称 打印重新绑定问题待解决 瑞银信问题反馈 1.消费撤销isOpenAdminVerify设为false依然出现输入管理员密码 2.预授权的时候报错，原因是响应报文不完整，没有流水号、卡号、时间、商户名称等参数。 3.不完整的参数导致后台报错调用方法过程中，出现错误，请重试或联系管理员，异常信息：Object 123天喻的响应报文 &#123;&quot;merchantNo&quot;:&quot;88733D048161867&quot;,&quot;transResult&quot;:&quot;00&quot;,&quot;transType&quot;:&quot;PRE_AUTHORIZATION&quot;, &quot;terminalNo&quot;:&quot;C7524363&quot;,&quot;orderId&quot;:&quot;9EB14B5EEA084771893F26BE76EE0B97&quot;&#125; 123456789101112A8 响应报文 &#123;&quot;orderId&quot;:&quot;591160C808DA4CF5915E539084D653A7&quot;,&quot;transType&quot;:&quot;PRE_AUTHORIZATION&quot;, &quot;transResult&quot;:&quot;00&quot;,&quot;transMoney&quot;:&quot;1&quot;,&quot;merchantNo&quot;:&quot;88733D048161867&quot;, &quot;terminalNo&quot;:&quot;C7738606&quot;,&quot;merchantName&quot;:&quot;浙江丰收收信息科技有限公司&quot;,&quot;operNo&quot;:&quot;&quot;, &quot;batchNo&quot;:&quot;000004&quot;,&quot;traceNo&quot;:&quot;100111&quot;,&quot;refNo&quot;:&quot;000351904839&quot;,&quot;authNo&quot;:&quot;547594&quot;, &quot;expDate&quot;:&quot;2612&quot;,&quot;cardNo&quot;:&quot;6230780100013423125&quot;,&quot;cardIssuerCode&quot;:&quot;03110000---&quot;, &quot;cardAcquirerCode&quot;:&quot;48873319&quot;,&quot;payWay&quot;:&quot;0004&quot;,&quot;cardInputType&quot;:&quot;2&quot;, &quot;date&quot;:&quot;0619&quot;,&quot;time&quot;:&quot;170735&quot;,&quot;forcePsw&quot;:&quot;true&quot;,&quot;forceSign&quot;:&quot;true&quot;,&quot;ARQC&quot;:&quot;F1C7D3382D918FB0&quot;,&quot;TVR&quot;:&quot;0000000000&quot;, &quot;AID&quot;:&quot;A000000333010101&quot;,&quot;TSI&quot;:&quot;0000&quot;,&quot;APPLAB&quot;:&quot;PBOC DEBIT&quot;,&quot;APPName&quot;:&quot;&quot;, &quot;UNPR_NUM&quot;:&quot;A9718936&quot;,&quot;AIP&quot;:&quot;7C00&quot;,&quot;IAD&quot;:&quot;07010103A00000010A010000000000F317899F&quot;, &quot;TermCap&quot;:&quot;E0F0C8&quot;&#125; 20 星期四 领券问题:1.重复出现绑定，2.付一次钱多个券的情况 卡券核销演示 小票客服电话定制 天喻机器测试反馈 丰付大讲堂 21 星期五 24 星期一 核销开发跟踪进度 瑞银信25 星期二 核销优化 合利宝预授权撤销金额不一致报13然后正常完成或撤销报25的问题反馈 瑞银信天喻机器跟踪 核销测试问题反馈 卡核销磁条卡问题 小票打印订单金额及二维码问题26 星期三 试题 卡核销非接读卡方式撤销，券核销使用扫码支付的在核销撤销的扫码撤销，出现打印中，不出小票，然后无法退回界面（核销类撤销都会出现此情况）。 卡核销插卡交易能出现活动显示，但是实际扣款金额不一致，应该是金额的单位有问题 卡核销磁条卡不显示活动，输入1元，实际扣款为100元，完成活动时提示参数不完整。 输入金额退格bug修复 27 星期四 核销磁条卡 12cno=4581230179533098&amp;pno=10006035&amp;price=100.00&amp;serialNo=000002&amp;storeNo=112330170110006&amp;tradeNo=000205&amp;key=wx732d107d84a6a118 IC卡12cno=6259588894275303&amp;pno=10006035&amp;price=100.00&amp;serialNo=000002&amp;storeNo=112330170110006&amp;tradeNo=000200&amp;key=wx732d107d84a6a118 配置核销活动，装机待批量测试。 试题已完成。 28 星期五 核销流程梳理 批量测试 瑞银信天喻SDK测试 结算之后第一笔交易签到后会一直正在请求 会闪退 消费进去不应有扫码，无刷卡模式。 29 星期六 联动优势渠道 - 536 W2 银联扫码无法撤销(商户已开通扫码)走私下退，联动bug 核销平台操作文档整理 七月1 星期一 核销交易测试 平台文档整理2 星期二 核销机器文档编写 银行活动添加、商户添加及测试。3 星期三 核销程序装机测试 核销平台培训4 星期四 年中会5 星期五 小票打印分的数据处理double类型 全单-活动基数，导致优惠金额不正确的问题。6 星期六 商户现场8 星期一 核销程序改版，只显示核销9 星期二 核销发布 扫码优化 升级问题，有交易的升级后交易查询闪退,报错:1234567891007-09 18:28:02.477 22532-22532/? E/AndroidRuntime: FATAL EXCEPTION: main Process: com.newland.payment, PID: 22532 java.lang.NullPointerException: Attempt to invoke virtual method &apos;boolean java.lang.Boolean.booleanValue()&apos; on a null object reference at com.newland.payment.ui.fragment.TranceWaterListFragment$1.convert(TranceWaterListFragment.java:138) at com.newland.payment.ui.fragment.TranceWaterListFragment$1.convert(TranceWaterListFragment.java:128) at com.xiaoyue.widget.listview.CommonAdapter.getView(CommonAdapter.java:77) at android.widget.AbsListView.obtainView(AbsListView.java:2347) at android.widget.ListView.makeAndAddView(ListView.java:1864) at android.widget.ListView.fillDown(ListView.java:698) 10 星期三 瑞银信问题跟踪 瑞银信联迪版撤销测试 瑞银信SDK联迪版撤销功能开发 百富A920扫码退货 11 星期四 请假 12 星期五 瑞银信A920程序问题 快支付联迪A8更新 瑞银信SDK联迪，扫码撤销，扫码退货，银行卡退货功能调试。 瑞银信银行卡退货报文1234567&quot;orderId&quot;:&quot;121231231&quot;,&quot;transType&quot;:&quot;SALE_RETURN&quot;,&quot;transResult&quot;:&quot;00&quot;,&quot;transName&quot;:&quot;退货&quot;,&quot;transMoney&quot;:&quot;1&quot;,&quot;merchantNo&quot;:&quot;88733D048161867&quot;,&quot;terminalNo&quot;:&quot;C7738606&quot;,&quot;merchantName&quot;:&quot;浙江丰收收信息科技有限公司&quot;,&quot;operNo&quot;:&quot;01&quot;,&quot;batchNo&quot;:&quot;000004&quot;,&quot;traceNo&quot;:&quot;100071&quot;,&quot;refNo&quot;:&quot;000418529887&quot;,&quot;expDate&quot;:&quot;2412&quot;,&quot;cardNo&quot;:&quot;6259588894275303&quot;,&quot;cardIssuerCode&quot;:&quot;03100000---&quot;,&quot;cardAcquirerCode&quot;:&quot;48873319&quot;,&quot;payWay&quot;:&quot;0004&quot;,&quot;cardInputType&quot;:&quot;2&quot;,&quot;date&quot;:&quot;0712&quot;,&quot;time&quot;:&quot;181759&quot;,&quot;forcePsw&quot;:&quot;false&quot;,&quot;forceSign&quot;:&quot;false&quot;,&quot;imageData&quot;:&quot;Qk……&quot;&#125; 13 星期六 A8撤销+整体测试，刷卡退货会崩溃，扫码退货报IF交易失败 15 星期一 扫脸设备，收银机金额捕获16 星期二 瑞银信扫码退货报文 107-16 09:39:41.212 8856-8872/com.pay.ruipay E/SCAN_RETURN: &#123;&quot;orderId&quot;:&quot;121231231&quot;,&quot;transType&quot;:&quot;SCAN_RETURN&quot;,&quot;transResult&quot;:&quot;00&quot;,&quot;transName&quot;:&quot;微信退货&quot;,&quot;transMoney&quot;:&quot;1&quot;,&quot;merchantNo&quot;:&quot;88733D048161867&quot;,&quot;terminalNo&quot;:&quot;C7738606&quot;,&quot;merchantName&quot;:&quot;浙江丰收收信息科技有限公司&quot;,&quot;operNo&quot;:&quot;&quot;,&quot;batchNo&quot;:&quot;000006&quot;,&quot;traceNo&quot;:&quot;100147&quot;,&quot;payNo&quot;:&quot;81cc6f35556948e2bbc51777fbf71c82&quot;,&quot;refNo&quot;:&quot;000007418428&quot;,&quot;cardAcquirerCode&quot;:&quot;瑞银信&quot;,&quot;payWay&quot;:&quot;0001&quot;,&quot;date&quot;:&quot;0716&quot;,&quot;time&quot;:&quot;093933&quot;,&quot;forcePsw&quot;:&quot;false&quot;,&quot;forceSign&quot;:&quot;false&quot;&#125; 瑞银信平台扫码退货所需参数：金额，批次号，流水号，类型，日期。 17 星期三 瑞银信返回的日期时间格式和后台要求不一致。 非原交易卡号可退货成功。 18 星期四 联迪A8智慧收银项目整理 修复扫码的bug 扫码的轮询有吗？ 19 星期五 如果没有配置Transaction对应的名称则报错12345cn.fengfu.zhejiang.fengfupay E/MessageQueue-JNI: java.lang.IllegalArgumentException: ###Transaction name[银行卡核销] not found! Please check transaction xml config has contains this name!### at com.landicorp.android.finance.app.FinanceApplication.createTransaction(FinanceApplication.java:574) at com.landicorp.android.finance.app.MenuActivity.executeTransaction(MenuActivity.java:479) at com.landicorp.android.finance.app.MenuActivity.onButtonClicked(MenuActivity.java:335) 22 星期一 院子餐厅交易报表 排序 二维数组 23 星期二 常用类 A8源代码 24 星期三 FinanceApplication Transaction对应的有以Transaction为根节点的XML文件 name applicationName area globalConfig currentStepIndex context DefaultStepContainer * Stack TransactionStep25 星期四 finance app AnimationManager.java ApplicationConfig.java ApplicationConfigLoader.java BaseMenuActivity.java DescriptionParser.java FinanceApplication.java FinanceProvider.java MenuActivity.java TransactionStepActivity.java packet ISO8583Config.java ISO8583ConfigLoader.java ISO8583ConfigParser.java PacketConfig.java transaction communicate AbstractConnectionFactory.java BaseConnectionFactory.java BaseMacCalculator.java CertInfo.java CommSimpleIODevice.java Communication.java CommunicationDevice.java Connection.java ConnectionFactory.java CustomHttpClient.java ECBMacCaculator.java Ethernet.java EthernetInfo.java ISO8583LocalPacket.java ISO8583Packet.java ISO8583PacketFactory.java ISO8583PacketHeaderHandler.java ISO8583PacketImp.java MacCalculator.java ModemDevice.java NulCommDevice.java OnStateChangeListener.java Packet.java PacketFactory.java PacketHeaderHandler.java PacketHeaderHandlerV2.java SerialPortConnection.java SimpleIODeviceConnection.java SM4ECBMacCaculator.java SocketConnection.java SSLHttpConnection.java SSLSocketConnection.java TrustCertInstall.java Wifi.java Wireless.java WirelessInfo.java X99MacCaculator.java data AttributeGetter.java BatchNoValueGetter.java CommParameterValueGetter.java ContextValueGetter.java ContextValueSetter.java CurrentDateValueGetter.java CurrentDateValueSetter.java CurrentTimeValueGetter.java CurrentTimeValueSetter.java DateTimeValueGetter.java EmvAppValueGetter.java FieldValueGetter.java FieldValueSetter.java NullValueGetter.java PersistenceValueGetter.java PersistenceValueSetter.java RecordValueGetter.java ResponseFieldValueGetter.java ReversalValueGetter.java ReversalValueSetter.java RuntimeValueGetter.java RuntimeValueSetter.java SqlStatementValueGetter.java SqlValueGetter.java StringValueGetter.java SubStringGetter.java TagDataGetter.java TagDataWithoutFGetter.java TraceValueGetter.java ValueGetter.java ValueGetterCreator.java ValueSetter.java ValueSetterCreator.java database DatabaseConfigParser.java DatabaseLoader.java DatabaseManager.java DatabaseStatement.java DatabaseTable.java DatabaseUpgradeHandler.java DatabaseView.java DBOpenHelper.java DBRecord.java exception CommunicateDeviceNotReadyException.java CommunicateException.java CommunicateInterruptException.java CommunicateRejectException.java CommunicateTimeoutException.java ParserException.java printer step conditon EqualsCondition.java NotEqualsCondition.java NotStartsWithCondition.java RegexCondition.java SimpleTestCondition.java StartsWithCondition.java TransactionStepCondition.java AbstractStep.java CheckEqualsStep.java CheckMaxStep.java CheckRegExpStep.java DataConfig.java DataGroupConfig.java DebugStep.java EmptyStep.java ImportStep.java MakeFieldStep.java MakeValueStep.java RecordHandler.java ReversalHandler.java SetValueStep.java SimpleDataConfig.java SimpleObjectStep.java TransactionStep.java TransactionStepInterceptor.java TransactionStepResult.java UIStep.java util CardOutWaiter.java DataBuilder.java DataFactory.java DeviceUtil.java FieldTypeUtil.java FileOpenHelper.java FileSynchronizer.java LogUtil.java SecurityUtil.java SocketUtil.java StringUtil.java SyncedSettings.java SystemPropertiesProxy.java TLVData.java TLVDataList.java ToastX.java xmlparser logic ContextListGetter.java DBStatementListGetter.java DBTableListGetter.java ListGetter.java ListGetterCreator.java LogicBreak.java LogicCase.java LogicCaseMatch.java LogicCaseNotMatch.java LogicContext.java LogicContextValueGetter.java LogicData.java LogicDataManagerValueGetter.java LogicDefault.java LogicEqual.java LogicFor.java LogicItem.java LogicItemGroup.java LogicIterator.java LogicMatchs.java LogicMod.java LogicNotMatchs.java LogicParser.java LogicReturn.java LogicSwitch.java LogicUnEqual.java LogicValueGetter.java LogicValueGetterCreator.java SqlIterator.java SqlListGetter.java SubStringGetter.java BaseParser.java ActivityStack.java ActivityWrapper.java CodeDescriptor.java DataManager.java DefaultTransactionContext.java DefaultTransactionController.java DelayedFieldMaker.java EMVTransactionController.java InsertRecordTrigger.java ProxyTransactionContext.java RecordTrigger.java SimpleTransactionController.java Transaction.java TransactionConfigLoader.java TransactionContext.java TransactionController.java TransactionGlobalConfig.java TransactionParser.java TransactionSet.java TransactionSetParser.java TransactionStepContainer.java UpdateRecordTrigger.java xml解析 26 星期五 Android 浮窗 新大陆主密钥安装失败 联拓富API27 星期六 反射技术在android中的应用 插件 C语言29 星期一 预授权成功报文 12345678910111213141516&#123;&quot;status&quot;:&quot;00&quot;,&quot;msg&quot;:&quot;success&quot;,&quot;data&quot;:&#123; &quot;transactionid&quot;:&quot;9A38A4C16BEA41C0AA156D5D981FD41F&quot;, &quot;orderid&quot;:&quot;b36889475a60448f98c927e06139d584&quot;, &quot;refundorderid&quot;:&quot;&quot;, &quot;revokeorderid&quot;:&quot;&quot;, &quot;completeorderid&quot;:&quot;&quot;, &quot;orderstatus&quot;:&quot;&quot;, &quot;money&quot;:&quot;&quot;, &quot;paytype&quot;:&quot;1&quot;, &quot;qraddress&quot;:&quot;&quot;, &quot;terminalsn&quot;:&quot;&quot;, &quot;payinfo&quot;:&quot;&quot;, &quot;tips&quot;:&quot;支付成功&quot;&#125; &#125; 预授权交易查询接口 12345678910111213141516&#123;&quot;status&quot;:&quot;00&quot;,&quot;msg&quot;:&quot;success&quot;,&quot;data&quot;:&#123; &quot;transactionid&quot;:&quot;9A38A4C16BEA41C0AA156D5D981FD41F&quot;, &quot;orderid&quot;:&quot;b36889475a60448f98c927e06139d584&quot;, &quot;refundorderid&quot;:&quot;&quot;, &quot;revokeorderid&quot;:&quot;&quot;, &quot;completeorderid&quot;:&quot;&quot;, &quot;orderstatus&quot;:&quot;2&quot;, &quot;money&quot;:&quot;0.01&quot;, &quot;paytype&quot;:&quot;1&quot;, &quot;qraddress&quot;:&quot;&quot;, &quot;terminalsn&quot;:&quot;&quot;, &quot;payinfo&quot;:&quot;&quot;, &quot;tips&quot;:&quot;交易成功&quot;&#125; &#125; 12orderstatus(1:待支付，2:交易成功，3: 交易失败，4:交易已撤销，5:交易已关闭， 6:没有原始交易，7:交易撤销中) 预授权撤销接口12345678910111213141516&#123;&quot;status&quot;:&quot;00&quot;,&quot;msg&quot;:&quot;success&quot;,&quot;data&quot;:&#123; &quot;transactionid&quot;:&quot;C602595DF9DF45019E7FE54D1C81EE25&quot;, &quot;orderid&quot;:&quot;b36889475a60448f98c927e06139d584&quot;, &quot;refundorderid&quot;:&quot;&quot;, &quot;revokeorderid&quot;:&quot;C602595DF9DF45019E7FE54D1C81EE25&quot;, &quot;completeorderid&quot;:&quot;&quot;, &quot;orderstatus&quot;:&quot;&quot;, &quot;money&quot;:&quot;&quot;, &quot;paytype&quot;:&quot;&quot;, &quot;qraddress&quot;:&quot;&quot;, &quot;terminalsn&quot;:&quot;&quot;, &quot;payinfo&quot;:&quot;&quot;, &quot;tips&quot;:&quot;预授权撤销成功&quot;&#125; &#125; 30 星期二 未开通扫码预授权 12345678910111213141516&#123;&quot;status&quot;:&quot;01&quot;,&quot;msg&quot;:&quot;failure&quot;,&quot;data&quot;:&#123; &quot;transactionid&quot;:&quot;&quot;, &quot;orderid&quot;:&quot;55f6c607afa8491e8007dcc53b7b2fb0&quot;, &quot;refundorderid&quot;:&quot;&quot;, &quot;revokeorderid&quot;:&quot;&quot;, &quot;completeorderid&quot;:&quot;&quot;, &quot;orderstatus&quot;:&quot;&quot;, &quot;money&quot;:&quot;&quot;, &quot;paytype&quot;:&quot;1&quot;, &quot;qraddress&quot;:&quot;&quot;, &quot;terminalsn&quot;:&quot;&quot;, &quot;payinfo&quot;:&quot;&quot;, &quot;tips&quot;:&quot;商户没有开通扫码预授权权限&quot;&#125; &#125; 31 星期三 扫码预授权模块A920开发完成 银行卡权益校验 八月1 星期四 瑞银信SDK联迪A8版优化、装机 TLV 格式及编解码 2 星期五 设计模式适配器思想 Stack3 星期六4 星期日 二维火Android云收银模块化架构实践5 星期一 银行卡消费 1234567891011121314151617181920212223242526272829303132&#123;&quot;orderId&quot;:&quot;6B995CE8B0E747C1831CF11A1432D274&quot;,&quot;transType&quot;:&quot;SALE&quot;,&quot;transResult&quot;:&quot;00&quot;,&quot;transName&quot;:&quot;消费&quot;,&quot;transMoney&quot;:&quot;1&quot;,&quot;merchantNo&quot;:&quot;88733D048161867&quot;,&quot;terminalNo&quot;:&quot;C7738606&quot;,&quot;merchantName&quot;:&quot;浙江丰收收信息科技有限公司&quot;,&quot;operNo&quot;:&quot;01&quot;,&quot;batchNo&quot;:&quot;000004&quot;,&quot;traceNo&quot;:&quot;100038&quot;,&quot;refNo&quot;:&quot;000482915291&quot;,&quot;expDate&quot;:&quot;2612&quot;,&quot;cardNo&quot;:&quot;6230780100013423125&quot;,&quot;cardIssuerCode&quot;:&quot;03110000---&quot;,&quot;cardAcquirerCode&quot;:&quot;48873319&quot;,&quot;payWay&quot;:&quot;0004&quot;,&quot;cardInputType&quot;:&quot;2&quot;,&quot;date&quot;:&quot;0805&quot;,&quot;time&quot;:&quot;160105&quot;,&quot;forcePsw&quot;:&quot;true&quot;,&quot;forceSign&quot;:&quot;true&quot;,&quot;ARQC&quot;:&quot;9F9211A2A037DC0C&quot;,&quot;TVR&quot;:&quot;0000000000&quot;,&quot;AID&quot;:&quot;A000000333010101&quot;,&quot;TSI&quot;:&quot;0000&quot;,&quot;APPLAB&quot;:&quot;PBOC DEBIT&quot;,&quot;APPName&quot;:&quot;&quot;,&quot;UNPR_NUM&quot;:&quot;41F196FC&quot;,&quot;AIP&quot;:&quot;7C00&quot;,&quot;IAD&quot;:&quot;07010103A00000010A010000000000E056641A&quot;,&quot;TermCap&quot;:&quot;E0F0C8&quot;&#125; 银行卡消费撤销 108-05 16:03:56.559 28121-28235/com.pay.ruipay E/RUI: &#123;&quot;orderId&quot;:&quot;06FB6555651948BB8AEDB5715CC8188B&quot;,&quot;transType&quot;:&quot;SALE_REVOKE&quot;,&quot;transResult&quot;:&quot;00&quot;,&quot;transName&quot;:&quot;消费撤销&quot;,&quot;transMoney&quot;:&quot;1&quot;,&quot;merchantNo&quot;:&quot;88733D048161867&quot;,&quot;terminalNo&quot;:&quot;C7738606&quot;,&quot;merchantName&quot;:&quot;浙江丰收收信息科技有限公司&quot;,&quot;operNo&quot;:&quot;01&quot;,&quot;batchNo&quot;:&quot;000004&quot;,&quot;traceNo&quot;:&quot;100039&quot;,&quot;refNo&quot;:&quot;000482837788&quot;,&quot;expDate&quot;:&quot;2612&quot;,&quot;cardNo&quot;:&quot;6230780100013423125&quot;,&quot;cardIssuerCode&quot;:&quot;03110000---&quot;,&quot;cardAcquirerCode&quot;:&quot;48873319&quot;,&quot;payWay&quot;:&quot;0004&quot;,&quot;cardInputType&quot;:&quot;2&quot;,&quot;date&quot;:&quot;0805&quot;,&quot;time&quot;:&quot;160340&quot;,&quot;forcePsw&quot;:&quot;false&quot;,&quot;forceSign&quot;:&quot;false&quot;,&quot;imageData&quot;:&quot;Qk0+CgAAAAAAAD4AAAAoAAAA8AAAAFAAAAABAAEAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAA\\/\\/\\/\\/\\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\nAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\nAAAAAwAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAHAAAAAAAAAAAAAAAAAAAAA\\nAAAAAAAAAAAAAAMAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAHgAAAAAAAAAAA\\nAAAAAAAAAAAAAAAAAAAAAAAGAAAAAA+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAHwAA\\nAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAABgAAwAB2AAAAAAAAAAHgAAAAAAAAAAAAAAAAAAAAAAAM\\nAAHAAGwAAAAAAAAAB4AAAAAAAAAAAAAAAAAAAAAAAAwAB8AB3AAAAAAAAAA+AAAAAAAAAAAAAAAA\\nAAAAAAAAGAAOwAOYAAAAAAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAYAB3ABzAAgAAAAAAHwAAAAAAA\\nAAAAAAAAAAAAAAAAABgAMYAccAGAAAAAAB8AAAAAAAAAAAH\\/wAAAAAAAAAAAOADjADhgBwAAAAAA\\neAAAAAAAAAAAAf\\/\\/\\/\\/\\/\\/8AAAAAAwAccAcGAeAAAAAAHgAAAAAAAAAAAAf\\/\\/\\/\\/\\/\\/4AAAAADAHhgHg\\nwHgAAAAAD4AAAAAAAAAAAAAAAD4AADgAAAAAMB4MB4DB4AAAAAA8AAAAAB8AAAAAAAAABwAA8AAA\\nAAAwPBwPAY\\/AAAAAADAAAAAH\\/gAAAYAAAAADAAfAAAAAADDwGDwB\\/gAAAAAAAAAAAf\\/AAAABgAAA\\nAAMAPwAAAAAAP8Ax8ADgAAAAAAAAAAA\\/4AAAAAMAAA4AAQH4AAAAAAAPAD\\/AAAAAAAAAAAAAD\\/wA\\nAAAAAwAAH4ABB8AAAAAAAAAAHgAAAAAAAAAAAD\\/\\/gAAAAAADAAA5wAM+AAAAAAAAAAAAAAAAAAAA\\nAAAAAAAAAAAAAAYAAHBgA\\/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAA4HAHwAAAAAAAAAAA\\nAAAAAAAEgMB5IA0AIAEAEgB+AAOAMD4AAAAAAAAAAAAAAAAAAAhAQGIQGIAgAQAhAMYADwAZ\\/gAA\\nAAAAAAAAAAAAAAAAGGBAZhgwwDABgGGBhwA8AB\\/cAAAAAAAAAAAAAAAAAAAYYCBmGDDAEACAYYMD\\ngfAAP\\/gAAAAAAAAAAAAAAAAAAAjgP8I4MMAQAIAjgwH\\/wAH34AAAAAAAAAAAAAAAAAAADcAAw3Aw\\nwBgAwDcDAD4AA8AAAAAAAAAAAAAAAAAYAAADgBGA4DDACABADgMAAAAfAAAAAAAAAAAAAAAAAPwA\\nAAcAEYH\\/\\/4AIAEH8AwAAAHgAAAAAAAAAAAAAAAABzAAADIALf\\/\\/QAAwAZ\\/oDAAAB4AAAAAAAAAAA\\nAAAAAAcMAAAYQAs\\/kNgABAA+eQMAAAeAAAAAAAAAAAAAAAAADgwAABhgBwYZiAAEAHBtgYCADgAA\\nAAAAAAAAAAAAAAA4DAAACEAGAhMEAYYM8C0AgIA8AAAAAAAAAAAAAAAAAHAMAAAMwAIDNwMA\\/gfw\\nPwBjgDAAAAAAAAAAAAAAAAAB4BgH\\/\\/8AAAAOAEAAAwAYAAgAYAAAAAAAAAAAAAAAAAOAG\\/\\/4PgAA\\nABwAAAPGABgAAADAAAAAAAAAAAAAAAAADwf\\/8AD4AAAAOAAAD8YAMAAAAMAAAAAAAAAAAAAAAf\\/\\/\\n\\/\\/AAB+AAAABwAAA9jABwAAAAwAAAAAAAAAAAAAAH\\/\\/wAMAAPAAAAAcAAAHGMAGAAAADAAAAAAAAA\\nAAAAAAIBwABgADwAAAADgAAB4YwAwAAAAMAAAAAAAAAAAAAAAAOAAOAAcAAAAAcAAAODGAGAAAAA\\nYAB\\/+AAAAAAAAAAADgAAwAHAAAAAHgAADgMYA4AAAAB4H\\/\\/4AAAAAAAAAAAcAAGAB4AAAAA4AAA8\\nBhgHAAAAAB\\/\\/\\/+AAAAAAAAAAADgAAwAOAAAAAHAAAPAGGA4AAAAAP\\/\\/\\/wAAAAAAAAAAA4AAGADgA\\nAAAA4B4HwAYYHAAAAAH8AfngAAAAAAAAAAHAAA4A8AAAAAPH\\/x8ABhh4AAAAD8AHwHAAAAAAAAAA\\nA4AAHAHAAAAAD3+D+AAGGeAAAAB8AA4AMAAAAAAAAAADAAAwA4AAAAAf8APAAAYfgAAAA+AAHAAY\\nAAAAAAAAAAAAAHAGAAAAAH8AAAAAB\\/8AAAAHgAA4ABgAAAAAAAAAAAABwAYAAAAAcAAAAAAB+AAA\\nABwAADAAGAAAAAAAAAAAAD+AAwAAAAAAAAAAAAAYAAAAOAAAYAAYAAAAAAAAAAAAPgADAAAAAAAA\\nAAAAABgAAABwAABgADgAAAAAAAAAAAAAAAOAAAAAAAAAAAAAGAAAAOAAAGAAMAAAAAAAAAAAAAAA\\nAeAAAAAAAAAAAAAYAAAAwAAAYAB8AAAAAAAAAAAAAAAAeAAAAAAAAAAAABgAAADAAABgAfwAAAAA\\nAAAAAAAAAAAf4AAAAAAAAAAAGAAAAMAAADAH\\/AAAAAAAAAAAAAAAAAP\\/gAAAAAAAAAAYAAAAwAAA\\nHw\\/wAAAAAAAAAAAAAAAAAA+AAAAAAAAAABgAAADgAAAP\\/8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\nGAAAAHAAAAB8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAOAAAAHAAAAAAAAAAAAAAAAAAAAAA\\nAAAAAAAAADAAAAAfAAAD4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAf+B\\/8AAAAAAAAAAAAA\\nAAAAAAAAAAAAAAAAAADgAAAAAH\\/\\/8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAA\\nAAAAAAAAAAAAAAAAAAAAAAAAAAA\\/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD\\/wAAAAA\\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\nAAAAAAAAAAAAAAAAAAAA 6 星期二 瑞银信SDK改造完毕 扫码预授权SDK版本 7 星期三8 星期四 Transaction 13 星期二14 星期三 商米机器 Landi 先从视图下手。 支付SDK activity InputBankPayAmtActivity 输入金额 OrderConfirmActivity 订单确认 标签的含义 Transaction 交易标签 step 下一步 condition 条件 algorithm 算法15 星期四 算法 algorithm 16 星期五 下载主密钥 123456789101112&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0900&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000236&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10023554&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;110330151370314&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;00000002001&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;313734374341383234363739&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;01 &quot;/&gt; &lt;/Packet&gt; 1234567891011121314&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0910&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000236&quot;/&gt; &lt;field id=&quot;12&quot; value=&quot;171044&quot;/&gt; &lt;field id=&quot;13&quot; value=&quot;0816&quot;/&gt; &lt;field id=&quot;37&quot; value=&quot;100000049942&quot;/&gt; &lt;field id=&quot;39&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;56&quot; value=&quot;C015欢迎使用POS刷卡C109POS签购单C210FFFFFFFFFFC303111C412感谢你的惠顾C512400-99999999P1011P2011P3011P4011P5011N00812345678T10810006048T215112330170110006T326杭州余杭区良渚新联合大酒店T415872331770110003&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;00000002001&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;99C65867E53FC70ADAC0F34AD8D840DE236619DE&quot;/&gt; &lt;/Packet&gt; 签到1234567891011&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0800&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000237&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10006048&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;112330170110006&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;00000002001&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;999&quot;/&gt; &lt;/Packet&gt; 12345678910111213141516&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0810&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000237&quot;/&gt; &lt;field id=&quot;12&quot; value=&quot;171653&quot;/&gt; &lt;field id=&quot;13&quot; value=&quot;0816&quot;/&gt; &lt;field id=&quot;32&quot; value=&quot;123456&quot;/&gt; &lt;field id=&quot;37&quot; value=&quot;123456789012&quot;/&gt; &lt;field id=&quot;39&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10006048&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;112330170110006&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;00000001001&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;E96B0CD4FD509CFB97A5989FCFD398E3B9810F5A23117D77&quot;/&gt; &lt;/Packet&gt; 支付宝扫一扫 12345678910111213141516171819&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0200&quot;/&gt; &lt;field id=&quot;3&quot; value=&quot;000000&quot;/&gt; &lt;field id=&quot;4&quot; value=&quot;000000000001&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000239&quot;/&gt; &lt;field id=&quot;22&quot; value=&quot;03&quot;/&gt; &lt;field id=&quot;23&quot; value=&quot;001&quot;/&gt; &lt;field id=&quot;25&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10006048&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;112330170110006&quot;/&gt; &lt;field id=&quot;49&quot; value=&quot;156&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;90000001000&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;3546303130313832383736333132373230393735383230353535463033363139303831363546303230335A464235463034363139303831363543323031&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;01 &quot;/&gt; &lt;field id=&quot;64&quot; value=&quot;0000000000000000&quot;/&gt; &lt;/Packet&gt; 1234567891011121314151617181920212223&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0210&quot;/&gt; &lt;field id=&quot;3&quot; value=&quot;000000&quot;/&gt; &lt;field id=&quot;4&quot; value=&quot;000000000001&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000239&quot;/&gt; &lt;field id=&quot;12&quot; value=&quot;172020&quot;/&gt; &lt;field id=&quot;13&quot; value=&quot;0816&quot;/&gt; &lt;field id=&quot;22&quot; value=&quot;030&quot;/&gt; &lt;field id=&quot;23&quot; value=&quot;001&quot;/&gt; &lt;field id=&quot;25&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;37&quot; value=&quot;100000000004&quot;/&gt; &lt;field id=&quot;39&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10006048&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;112330170110006&quot;/&gt; &lt;field id=&quot;49&quot; value=&quot;156&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;90000001000&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;354631323033324243413532394239363736323443373038463135353236443433464539314336&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;CUP&quot;/&gt; &lt;field id=&quot;64&quot; value=&quot;3639364138364344&quot;/&gt; &lt;/Packet&gt; 微信扫一扫12345678910111213141516171819&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0200&quot;/&gt; &lt;field id=&quot;3&quot; value=&quot;000000&quot;/&gt; &lt;field id=&quot;4&quot; value=&quot;000000000001&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000269&quot;/&gt; &lt;field id=&quot;22&quot; value=&quot;03&quot;/&gt; &lt;field id=&quot;23&quot; value=&quot;001&quot;/&gt; &lt;field id=&quot;25&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10006048&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;112330170110006&quot;/&gt; &lt;field id=&quot;49&quot; value=&quot;156&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;90000001000&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;354630313031383133353137303037393735393639323339303546303336313930383137354630323035575850415935463034363139303831373543323031&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;01 &quot;/&gt; &lt;field id=&quot;64&quot; value=&quot;0000000000000000&quot;/&gt; &lt;/Packet&gt; 123456789101112131415161718192021222324&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0210&quot;/&gt; &lt;field id=&quot;3&quot; value=&quot;000000&quot;/&gt; &lt;field id=&quot;4&quot; value=&quot;000000000001&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000269&quot;/&gt; &lt;field id=&quot;12&quot; value=&quot;153418&quot;/&gt; &lt;field id=&quot;13&quot; value=&quot;0817&quot;/&gt; &lt;field id=&quot;22&quot; value=&quot;030&quot;/&gt; &lt;field id=&quot;23&quot; value=&quot;001&quot;/&gt; &lt;field id=&quot;25&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;37&quot; value=&quot;100000000013&quot;/&gt; &lt;field id=&quot;39&quot; value=&quot;CD&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10006048&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;112330170110006&quot;/&gt; &lt;field id=&quot;49&quot; value=&quot;156&quot;/&gt; &lt;field id=&quot;56&quot; value=&quot;成功&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;90000001000&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;354631323033323930303038453944414245453444374342343346423331333135313138333745&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;CUP&quot;/&gt; &lt;field id=&quot;64&quot; value=&quot;3032383332344633&quot;/&gt; &lt;/Packet&gt; 微信订单查询123456789101112131415161718&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0200&quot;/&gt; &lt;field id=&quot;3&quot; value=&quot;000000&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000270&quot;/&gt; &lt;field id=&quot;22&quot; value=&quot;03&quot;/&gt; &lt;field id=&quot;23&quot; value=&quot;001&quot;/&gt; &lt;field id=&quot;25&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10006048&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;112330170110006&quot;/&gt; &lt;field id=&quot;49&quot; value=&quot;156&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;91000001000&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;3546303336313930383137354630323035575850415935463034363139303831373546313230333239303030384539444142454534443743423433464233313331353131383337453546313531343230313930383137303333343231&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;01 &quot;/&gt; &lt;field id=&quot;64&quot; value=&quot;0000000000000000&quot;/&gt; &lt;/Packet&gt; 123456789101112131415161718192021&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0210&quot;/&gt; &lt;field id=&quot;3&quot; value=&quot;000000&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000270&quot;/&gt; &lt;field id=&quot;12&quot; value=&quot;153418&quot;/&gt; &lt;field id=&quot;13&quot; value=&quot;0817&quot;/&gt; &lt;field id=&quot;22&quot; value=&quot;030&quot;/&gt; &lt;field id=&quot;23&quot; value=&quot;001&quot;/&gt; &lt;field id=&quot;25&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;39&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10006048&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;112330170110006&quot;/&gt; &lt;field id=&quot;49&quot; value=&quot;156&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;91000001000&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;354631333132&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;CUP&quot;/&gt; &lt;field id=&quot;64&quot; value=&quot;3734414431343730&quot;/&gt; &lt;/Packet&gt; 扫码订单查询1234567891011121314151617181920&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0200&quot;/&gt; &lt;field id=&quot;3&quot; value=&quot;000000&quot;/&gt; &lt;field id=&quot;4&quot; value=&quot;000000000001&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000273&quot;/&gt; &lt;field id=&quot;22&quot; value=&quot;03&quot;/&gt; &lt;field id=&quot;23&quot; value=&quot;001&quot;/&gt; &lt;field id=&quot;25&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10006048&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;112330170110006&quot;/&gt; &lt;field id=&quot;49&quot; value=&quot;156&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;91000001000&quot;/&gt; &lt;field id=&quot;61&quot; value=&quot;000001000269&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;3546303336313930383137354630323035575850415935463034363139303831373546313230333239303030384539444142454534443743423433464233313331353131383337453546313531343230313930383137303431383234&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;01 &quot;/&gt; &lt;field id=&quot;64&quot; value=&quot;0000000000000000&quot;/&gt; &lt;/Packet&gt; 1234567891011121314151617181920212223&lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0210&quot;/&gt; &lt;field id=&quot;3&quot; value=&quot;000000&quot;/&gt; &lt;field id=&quot;4&quot; value=&quot;000000000001&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000273&quot;/&gt; &lt;field id=&quot;12&quot; value=&quot;153418&quot;/&gt; &lt;field id=&quot;13&quot; value=&quot;0817&quot;/&gt; &lt;field id=&quot;22&quot; value=&quot;030&quot;/&gt; &lt;field id=&quot;23&quot; value=&quot;001&quot;/&gt; &lt;field id=&quot;25&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;39&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10006048&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;112330170110006&quot;/&gt; &lt;field id=&quot;49&quot; value=&quot;156&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;91000001000&quot;/&gt; &lt;field id=&quot;61&quot; value=&quot;000001000269&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;354631333132&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;CUP&quot;/&gt; &lt;field id=&quot;64&quot; value=&quot;4230344230304443&quot;/&gt; &lt;/Packet&gt; 下载主密钥 10040600501000060320032130109000000000000C0001431303032343030323131303333303135383132303238360011000000120030001030383230303230313139 12345601 1E 60 00 04 00 00 60 10 00 02 01 09 09 10 00 18 00 00 0A 00 01 14 19 57 20 08 28 31 30 30 30 30 30 34 38 30 33 30 30 30 30 01 98 43 30 31 35 BB B6 D3 AD CA B9 D3 C3 50 4F 53 CB A2 BF A8 43 31 30 39 50 4F 53 C7 A9 B9 BA B5 A5 43 32 31 30 46 46 46 46 46 46 46 46 46 46 43 33 30 33 31 31 31 43 34 31 32 B8 D0 D0 BB C4 E3 B5 C4 BB DD B9 CB 43 35 31 32 34 30 30 2D 31 36 35 2D 31 36 35 35 50 31 30 31 31 50 32 30 31 31 50 33 30 31 31 50 34 30 31 31 50 35 30 31 31 4E 30 30 38 31 32 33 34 35 36 37 38 54 31 30 38 31 30 30 32 34 32 32 35 54 32 31 35 31 31 30 33 33 30 31 35 31 33 37 30 33 31 34 54 33 32 32 BA BC D6 DD D0 A1 B0 CD C0 AD B7 FE CA CE D3 D0 CF DE B9 AB CB BE 54 34 31 35 38 37 32 33 33 31 37 35 31 33 37 30 30 30 31 00 11 00 00 00 12 00 30 00 36 4B 6D B0 E5 B4 3F 4D 42 58 95 C9 8E 8C 92 B3 8B CF F8 4D 4C 70 70 41 3D BD D3 28 40 18 14 95 CF F0 25 30 BE 12345678910111213141516171819SEND0040 //报文长度64字节长度6005010000 //报文头603200321301 //Hearder0900 //消息类型00 00 00 00 00 C0 00 14 00000000000000000000000000000000000000001100000000000000000101003130303234303032 313130333330313538313230323836 00110000001 20030001030383230303230313139【41域】ans8 ASCII 31 30 30 32 34 30 30 32 -&gt; 10024002 【42域】ans15 ASCII 31 31 30 33 33 30 31 35 38 31 32 30 32 38 36 -&gt; 110330158120286【60域】n11 BCD 【60.1】n2 BCD 00 【60.2】n6 BCD 110000 【60.3】n3 BCD 001 200300010 30383230303230313139【62域】 30 38 32 30 30 32 30 31 31 39 -&gt;0820020119 12````1 10 60 00 04 00 00 60 10 00 02 01 09 09 10 00 18 00 00 0A 00 01 14 20 31 49 08 30 31 30 30 30 30 30 34 38 32 35 33 39 30 30 01 84 43 30 31 35 BB B6 D3 AD CA B9 D3 C3 50 4F 53 CB A2 BF A8 43 31 30 39 50 4F 53 C7 A9 B9 BA B5 A5 43 32 31 30 46 46 46 46 46 46 46 46 46 46 43 33 30 33 31 31 31 43 34 31 32 B8 D0 D0 BB C4 E3 B5 C4 BB DD B9 CB 43 35 31 32 34 30 30 2D 31 36 35 2D 31 36 35 35 50 31 30 31 31 50 32 30 31 31 50 33 30 31 31 50 34 30 31 31 50 35 30 31 31 4E 30 30 38 31 32 33 34 35 36 37 38 54 31 30 38 31 30 30 32 34 32 33 30 54 32 31 35 31 31 30 33 33 30 31 35 38 31 32 30 32 38 36 54 33 30 38 B7 E1 B8 B6 D0 C5 CF A2 54 34 31 35 38 32 39 33 33 31 37 37 30 31 31 30 35 31 38 00 11 00 00 00 12 00 30 00 36 45 25 6C A0 6B 33 66 3D AB 45 E3 AD 0E EA 80 7D DA C0 F3 4A D8 D8 40 DE B8 73 09 1C 46 87 EC E8 6F 9B 4C 67 RECV1234567891011121314151617181920212223242526272829303132333435363738396000040000601000020109091000 18 00 00 0A 00 01 140000000000011000000000000000000000001010000000000000000100010100195148 0826 313030303030343738303733 3030 0184【368个字符】 43303135BBB6D3ADCAB9D3C3504F53CBA2BFA843313039504F53C7A9B9BAB5A543323130464646464646464646464333303331313143343132B8D0D0BBC4E3B5C4BBDDB9CB433531323430302D3136352D31363535503130313150323031315033303131503430313150353031314E30303831323334353637385431303831303032343030325432313531313033333031353831323032383654333038B7E1B8B6D0C5CFA25434313538323933333137373031313035313800110000001 20030003698F0EC7531FC5C5403AD9338F2138C3EDAC0F34AD8D840DEB873091C4687ECE895C80736【12域】n6 hhmmss BCD 195148 -&gt; 19:51:48【13域】n4 MMDD BCD 0826 【37域】an12 ASCII 31 30 30 30 30 30 34 37 38 30 37 33 -&gt; 100000478073【39域】an2 ASCII 30 30 -&gt; 000184 //密文长度43303135BBB6D3ADCAB9D3C3504F53CBA2BFA843313039504F53C7A9B9BAB5A543323130464646464646464646464333303331313143343132B8D0D0BBC4E3B5C4BBDDB9CB433531323430302D3136352D31363535503130313150323031315033303131503430313150353031314E30303831323334353637385431303831303032343030325432313531313033333031353831323032383654333038B7E1B8B6D0C5CFA254343135383239333331373730313130353138明文内容 TLV 格式C015欢迎使用POS刷卡C109POS签购单C210FFFFFFFFFFC303111C412感谢你的惠顾C512400-165-1655P1011P2011P3011P4011P5011N00812345678T10810024002T215110330158120286T308丰付信息T415829331770110518【56域】ans ...999 LLLVAR ASCII TLV格式 T1 终端号 10024002 T2 商户号 110330158120286 T3 商户名称 丰付信息 T4 银联商户号 829331770110518【60域】n11 BCD 00110000001 【60.1】n2 BCD 00 【60.2】n6 BCD 110000 【60.3】n3 BCD 001 200300036 98F0EC7531FC5C5403AD9338F2138C3E DAC0F34AD8D840DEB873091C4687ECE8 95C80736 200300036 5C0D6E238BB7E56A223B4B2438045B4B DAC0F34AD8D840DEB873091C4687ECE8 6EC83432【62域】 CCEE5865926600A7FD1BD9F42A16098DDAC0F34AD8D840DEB873091C4687ECE8647F8A4E 扫码支付send 100D7600501000060320032130102003020068000C080370000000000000000010001930320000100313030323432333031313033333031353831323032383631353600634132303335303130303230343032303130303832303032303131393035303038333230303031202041333031383133353137383730303638343031373133380011900000010000006335463031303138313335313738373030363834303137313338354630333631353033343435463032303557585041593546303436313930383330354332303100033031204344384638354343 房管局send 10069600501000060320032130107002020048000C08015000000000101002092313030323430303231313033333031353831323032383631353600110100001200000031464448463131313231202020202020202020202020202020323031393038234436413746383145 12345678910111213141516171819202100766005010000603200321301070020 20 04 80 00 C0 80 150010000000100000000001001000000000000000110000001000000000010101【3域】000000【11域】000061【22域】002【25域】92【41域】3130303234303032【42域】313130333330313538313230323836【49域】313536【60域】【62域】5F03 6 104705 5F03 6 104705 5F04 6 190828 5F15014 nullFDHF11121 201908#【64域】000000 000061 002 092 3130303234303032 313130333330313538313230323836 313536 0011 010000120000 0044 354630333631303437303535463033363130343730353546303436313930383238354631353031346E756C6C 3537453744334636 房管局 rec1234567891011121314151617181920216000040000601000020109071020 20 04 80 02 C0 80 150010000000100000000001001000000000000010110000001000000000010101【3域】 000000【11域】 000061【22域】 002【25域】 092【39域】 3430 40【41域】 3130303234303032 10024002【42域】 313130333330313538313230323836【49域】 313536 【60域】【62域】【64域】000000 000061 002 092 3430 3130303234303032 313130333330313538313230323836 313536 00110100001200000044354630333631303437303535463033363130343730353546303436313930383238354631353031346E756C6C4333384636383044 003153 200003156 205003157 260003165 1000003166 44003167 80003168 180003175 100003179 200003186 100003187 200003188 200003190 300003195 300003196 310003197 200003199 150003200 200003201 8003207 290003208 200003209 200003213 300003215 200003216 200003218 150003220 200003221 100003222 100003233 100003234 350003235 200003239 200003242 200003249 100003251 330003254 250003257 300003259 200003262 244 120040600501000060320032130109000000000000C0001431303032343030323131303333303135383132303238360011000000120030001030383230303230313139 Socket https://www.jianshu.com/p/8ee3ee766265 https://github.com/vilyever/AndroidSocketClient https://github.com/apon/lemon https://blog.csdn.net/u012391876/article/details/73913560 http://www.jizhuomi.com/android/example/443.html https://www.jianshu.com/p/f4a60bb8dfab https://www.jianshu.com/p/7dac7e5dffb2 https://github.com/HappyGhostz/OkhttpReview https://github.com/smile-sxl/NetWorkProject/tree/master/app/src/main/java/com/smile/networkproject/http 商米send10040600501000060320032130109000000000000C0001431303032343233303131303333303135383132303238360011000000010030001030383230303230313139 商米rec160000400006010000201090910001800000A00011416390108313130303030303438333730383030018443303135BBB6D3ADCAB9D3C3504F53CBA2BFA843313039504F53C7A9B9BAB5A543323130464646464646464646464333303331313143343132B8D0D0BBC4E3B5C4BBDDB9CB433531323430302D3136352D31363535503130313150323031315033303131503430313150353031314E30303831323334353637385431303831303032343233305432313531313033333031353831323032383654333038B7E1B8B6D0C5CFA25434313538323933333137373031313035313800110000000100300036B42509E3B52ABE6493E6EABAA414B081DAC0F34AD8D840DEB873091C4687ECE8A28F21DF 百富send10040600501000060320032130109000000000000C0001431303032343233303131303333303135383132303238360011000000010030001030383230303230313139 百富rec160000400006010000201090910001800000A00011416453008313130303030303438333732313030018443303135BBB6D3ADCAB9D3C3504F53CBA2BFA843313039504F53C7A9B9BAB5A543323130464646464646464646464333303331313143343132B8D0D0BBC4E3B5C4BBDDB9CB433531323430302D3136352D31363535503130313150323031315033303131503430313150353031314E30303831323334353637385431303831303032343233305432313531313033333031353831323032383654333038B7E1B8B6D0C5CFA254343135383239333331373730313130353138001100000001003000362121DC0DC0F349C4CAB38924F3D53617DAC0F34AD8D840DEB873091C4687ECE87821B31B 下载主密钥(62域) 12假如 TMK 为全 0，密钥加密密钥为 全 F，则下发的密钥为: CAAAAF4DEAF1DBAECAAAAF4DEAF1DBAE FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 8CA64DE9 1231FEE88C948F6DA3CA8FAEB137A97DFDA DAC0F34AD8D840DEB873091C4687ECE8 1E15660818C667DCFE87FC8C2A950DA549F5F67C DAC0F34AD8D840DEB873091C4687ECE8 01386ABE2F4E04EAF38441568895A40C906DC380//明文 FinApplication.dal.getSys(). unused 终端签到1send 005C//长度600501000060320032130108000020000000C0001600009931303032343239353131303333303135383132303238360011000000010030003053657175656E6365204E6F313731323334504531383139365436303839350003393939 12rec60000400006010000201090810003800010AC000140000991535020902061234563132333435363738393031323030313030323432393531313033333031353831323032383600110000000100300040472847DE339088AE361C09EBC1BB0F1F9FC1D9EB4F2BFE7AA3033AB0852568E37382AA172F9201EB 九月24 Transaction.java String name 【下载主秘钥】 String applicationName 【】 String area TransactionGlobalConfig 【】 List results TransactionStepResult Object nextStep boolean isJumpType boolean isGoAhead List interceptors String className String intercept(TransactionContext context) String name private List&lt;Pair&lt;String, ValueGetter&gt;&gt; params; int currentStepIndex 【】 DefaultTransactionContext context Map&lt;String, String&gt; values Map&lt;String, String&gt; params Map&lt;String, String&gt; attrs Map&lt;String, String&gt; global Packet basePacket Packet baseResponsePacket ISO8583Packet packet ISO8583Packet responsePacket SyncedSettings reversalData SyncedSettings persistenceData SyncedSettings commParams DatabaseManager dbManager PrinterTemplateManager prtManager ActivityStack activityStack Activity homeActivity Activity baseActivity TransactionStep currentStep DBRecord lastRecord String applicationName String area Pinpad pinpad BaseConnectionFactory&lt;?&gt; connectionFactory PBOCTransaction pbocTransaction CodeDescriptor descriptor TransactionController controller boolean isForSilence PausableHandler mainHandler Transaction.DefaultStepContainer Stack stepStack ActivityStack activityStack ReversalHandler reversalHandler RecordHandler recordHandler Transaction.OnTransactionFinishListener onFinish Transaction.OnBeforeTransactionFinishListener onBeforeFinish boolean isFinished Map&lt;String, ValueGetter&gt; attributes BaseConnectionFactory&lt;?&gt; connectionFactory String lastResult TransactionController controller PBOCFactory pbocFactory int baseStepIndex = 0 int firstImportStepIndex 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697989910010110210310410510610710810911011111211311411511611711811912012112212312412512612712812913013113213313413513613713813914014114214314414514614714809-24 17:05:23.770 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: step no ------------------下载主秘钥------------------/009-24 17:05:23.776 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: step no ------------------下载主秘钥------------------/109-24 17:05:23.782 792-4554/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.789 792-4554/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.794 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.797 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: step no ------------------下载主秘钥------------------/209-24 17:05:23.804 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: step no ------------------下载主秘钥------------------/309-24 17:05:23.813 792-4516/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.819 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: step no ------------------下载主秘钥------------------/409-24 17:05:23.832 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: step no ------------------下载主秘钥------------------/509-24 17:05:23.833 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: step no ------------------下载主秘钥------------------/609-24 17:05:23.833 9631-9631/cn.fengfu.zhejiang.fengfupay I/Timeline: Timeline: Activity_launch_request id:cn.fengfu.zhejiang.fengfupay time:763015309-24 17:05:23.834 792-4443/? I/ActivityManager: START u0 &#123;cmp=cn.fengfu.zhejiang.fengfupay/.unionpay.CommunicateActivity (has extras)&#125; from uid 10171 on display 009-24 17:05:23.834 792-4443/? W/ActivityManager: startActivity called from finishing ActivityRecord&#123;38fc24de u0 cn.fengfu.zhejiang.fengfupay/.unionpay.setup.MainKeyDownloadActivity t3 f&#125;; forcing Intent.FLAG_ACTIVITY_NEW_TASK for: Intent &#123; cmp=cn.fengfu.zhejiang.fengfupay/.unionpay.CommunicateActivity (has extras) &#125;09-24 17:05:23.835 792-4443/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.888 281-846/? E/AudioPolicyManager: unknown stream type 1309-24 17:05:23.891 9631-9631/cn.fengfu.zhejiang.fengfupay E/======================: run run run run09-24 17:05:23.894 9631-9631/cn.fengfu.zhejiang.fengfupay I/DefaultTransactionController: --- current trans has no reversal ---09-24 17:05:23.913 9631-9631/cn.fengfu.zhejiang.fengfupay D/Communication: =====CommunicationDevice==getDevice is [nul_socket_free]====09-24 17:05:23.913 9631-9631/cn.fengfu.zhejiang.fengfupay D/Communication: =====CommunicationDevice==getDevice is [nul_socket_free]====09-24 17:05:23.914 9631-9631/cn.fengfu.zhejiang.fengfupay D/Communication: -----------------------------state------------------------009-24 17:05:23.914 9631-9631/cn.fengfu.zhejiang.fengfupay D/Communication: ===========================SEND START==========================09-24 17:05:23.903 9631-9631/cn.fengfu.zhejiang.fengfupay I/jiang.fengfupay: type=1400 audit(0.0:897): avc: denied &#123; transfer &#125; for scontext=u:r:untrusted_app:s0 tcontext=u:r:init:s0 tclass=binder permissive=109-24 17:05:23.916 3970-3970/? D/!MCSER!: ================ ON LOGIN (pid:9631, tid:3970) ================09-24 17:05:23.917 3970-3970/? D/!MCSER!: LOGIN | login succss !09-24 17:05:23.918 9631-9631/cn.fengfu.zhejiang.fengfupay I/ViewRootImpl: CPU Rendering VSync enable = true09-24 17:05:23.919 3970-4039/? W/!MCSER!: SECURITY## a client is using &apos;oneway&apos;!09-24 17:05:23.920 9631-17020/cn.fengfu.zhejiang.fengfupay D/XMLPackage: &lt;?xml version=&quot;1.0&quot; encoding=&quot;gb2312&quot;?&gt; &lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0900&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000048&quot;/&gt; &lt;field id=&quot;41&quot; value=&quot;10023771&quot;/&gt; &lt;field id=&quot;42&quot; value=&quot;110330170110006&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;00000002001&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;313734374341383234363931&quot;/&gt; &lt;field id=&quot;63&quot; value=&quot;01 &quot;/&gt; &lt;/Packet&gt;09-24 17:05:23.922 9631-17020/cn.fengfu.zhejiang.fengfupay D/Communication: connecting --------------- 09-24 17:05:23.922 9631-17020/cn.fengfu.zhejiang.fengfupay D/Communication: =====CommunicationDevice==getDevice is [nul_socket_free]====09-24 17:05:23.922 9631-17020/cn.fengfu.zhejiang.fengfupay I/SocketConnection: connecting--------------addr[121.43.181.76:5555]---------------09-24 17:05:23.936 792-4443/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.940 9631-17020/cn.fengfu.zhejiang.fengfupay D/Communication: sending --------------- 09-24 17:05:23.941 9631-17020/cn.fengfu.zhejiang.fengfupay E/log: data:600003000060320032000209000020000000C00016000048313030323337373131313033333031373031313030303600110000000200100012313734374341383234363931000330312009-24 17:05:23.941 9631-17020/cn.fengfu.zhejiang.fengfupay D/Communication: receiving --------------- 09-24 17:05:23.945 792-4443/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.956 792-807/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.969 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.973 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.975 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.982 792-816/? I/ActivityManager: Displayed cn.fengfu.zhejiang.fengfupay/.unionpay.CommunicateActivity: +131ms (total +228ms)09-24 17:05:23.982 792-816/? I/Timeline: Timeline: Activity_windows_visible id: ActivityRecord&#123;5bbcfdb u0 cn.fengfu.zhejiang.fengfupay/.unionpay.CommunicateActivity t3&#125; time:763030209-24 17:05:23.987 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:23.990 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.002 9631-9631/cn.fengfu.zhejiang.fengfupay I/Timeline: Timeline: Activity_idle id: android.os.BinderProxy@1845f5cf time:763032209-24 17:05:24.002 9631-9631/cn.fengfu.zhejiang.fengfupay I/Timeline: Timeline: Activity_idle id: android.os.BinderProxy@2c3adcd time:763032209-24 17:05:24.032 17022-17022/? E/VM_BMS: Unable to open BMS device09-24 17:05:24.032 17022-17022/? E/VM_BMS: Unable to intialize BMS parameters09-24 17:05:24.042 9631-17020/cn.fengfu.zhejiang.fengfupay E/log: rec:60000400006010000201090910003800000A00011400004817052409243130303030303530373636383030020243303135BBB6D3ADCAB9D3C3504F53CBA2BFA843313039504F53C7A9B9BAB5A543323130464646464646464646464333303331313143343132B8D0D0BBC4E3B5C4BBDDB9CB433531323430302D3136352D31363535503130313150323031315033303131503430313150353031314E30303831323334353637385431303831303032333737315432313531313033333031373031313030303654333236BABCD6DDD3E0BABCC7F8C1BCE4BED0C2C1AABACFB4F3BEC6B5EA543431353832393333313737303131303531380011000000020010002043C15D1B9DB5681226281CADEC5E400FB6E1EDC009-24 17:05:24.047 9631-17020/cn.fengfu.zhejiang.fengfupay D/XMLPackageResponse: &lt;?xml version=&quot;1.0&quot; encoding=&quot;gb2312&quot;?&gt; &lt;Packet&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;application&gt;丰付收银&lt;/application&gt; &lt;area&gt;全国&lt;/area&gt; &lt;field id=&quot;0&quot; value=&quot;0910&quot;/&gt; &lt;field id=&quot;11&quot; value=&quot;000048&quot;/&gt; &lt;field id=&quot;12&quot; value=&quot;170524&quot;/&gt; &lt;field id=&quot;13&quot; value=&quot;0924&quot;/&gt; &lt;field id=&quot;37&quot; value=&quot;100000507668&quot;/&gt; &lt;field id=&quot;39&quot; value=&quot;00&quot;/&gt; &lt;field id=&quot;56&quot; value=&quot;C015欢迎使用POS刷卡C109POS签购单C210FFFFFFFFFFC303111C412感谢你的惠顾C512400-165-1655P1011P2011P3011P4011P5011N00812345678T10810023771T215110330170110006T326杭州余杭区良渚新联合大酒店T415829331770110518&quot;/&gt; &lt;field id=&quot;60&quot; value=&quot;00000002001&quot;/&gt; &lt;field id=&quot;62&quot; value=&quot;43C15D1B9DB5681226281CADEC5E400FB6E1EDC0&quot;/&gt; &lt;/Packet&gt;09-24 17:05:24.047 9631-17020/cn.fengfu.zhejiang.fengfupay I/Communication: ----=====================-transfer end-======================----- 09-24 17:05:24.062 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: step no ------------------下载主秘钥------------------/709-24 17:05:24.066 9631-9631/cn.fengfu.zhejiang.fengfupay D/debug: respField56 = C015欢迎使用POS刷卡C109POS签购单C210FFFFFFFFFFC303111C412感谢你的惠顾C512400-165-1655P1011P2011P3011P4011P5011N00812345678T10810023771T215110330170110006T326杭州余杭区良渚新联合大酒店T41582933177011051809-24 17:05:24.066 9631-9631/cn.fengfu.zhejiang.fengfupay D/debug: respField56 = [B@13c8eb5c09-24 17:05:24.067 9631-9631/cn.fengfu.zhejiang.fengfupay D/debug: respField56 = C015欢迎使用POS刷卡C109POS签购单C210FFFFFFFFFFC303111C412感谢你的惠顾C512400-165-1655P1011P2011P3011P4011P5011N00812345678T10810023771T215110330170110006T326杭州余杭区良渚新联合大酒店T41582933177011051809-24 17:05:24.067 9631-9631/cn.fengfu.zhejiang.fengfupay D/debug: T3 value=杭州余杭区良渚新联合大酒店09-24 17:05:24.067 9631-9631/cn.fengfu.zhejiang.fengfupay D/debug: T1 value=1002377109-24 17:05:24.067 9631-9631/cn.fengfu.zhejiang.fengfupay D/debug: T2 value=11033017011000609-24 17:05:24.067 9631-9631/cn.fengfu.zhejiang.fengfupay D/debug: T4 value=82933177011051809-24 17:05:24.079 792-792/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.088 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: step no ------------------下载主秘钥------------------/809-24 17:05:24.092 9631-9631/cn.fengfu.zhejiang.fengfupay D/saveAndLoadMainKey: field62 = 43C15D1B9DB5681226281CADEC5E400FB6E1EDC009-24 17:05:24.093 9631-9631/cn.fengfu.zhejiang.fengfupay D/saveAndLoadMainKey: 主密钥密文 = 43C15D1B9DB5681209-24 17:05:24.093 9631-9631/cn.fengfu.zhejiang.fengfupay D/saveAndLoadMainKey: 主密钥加密秘钥= 26281CADEC5E400F09-24 17:05:24.093 9631-9631/cn.fengfu.zhejiang.fengfupay I/MainKeyDownload: 主秘钥明文：：5E95F8FFB03D458809-24 17:05:24.096 3949-3949/? D/PinpadDevice: [Line] : 1000; [Func] : getKapInfo; pinpad ext perm check .09-24 17:05:24.096 792-1017/? W/Domain: checkUidPermission(), current state is PS_MOCKUP, we grant permission: com.landi.pinpad.perm.NORMAL_FUNC09-24 17:05:24.101 3949-4024/? D/PinpadDevice: [Line] : 779; [Func] : formatKap; pinpad ext perm check .09-24 17:05:24.101 792-4443/? W/Domain: checkUidPermission(), current state is PS_MOCKUP, we grant permission: com.landi.pinpad.perm.ADMIN_FUNC09-24 17:05:24.109 792-807/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.113 3974-3974/? D/StatusBar.NetworkController: hasService: mServiceState=1 1 home null null null Unknown Unknown CSS not supported -1 -1 RoamInd=-1 DefRoamInd=-1 EmergOnly=true retVal=false09-24 17:05:24.115 3974-3974/? D/StatusBar.NetworkController: refreshViews: Data not connected!! Set no data type icon / Roaming09-24 17:05:24.116 3974-3974/? D/StatusBar.NetworkController: refreshViews connected=&#123; wifi &#125; level=4 combinedSignalIconId=0x7f020366/com.android.systemui:drawable/stat_sys_wifi_signal_4_fully combinedActivityIconId=0x7f02035b mobileLabel=只能拨打紧急呼救电话 wifiLabel=&quot;fengfu2.5G&quot; emergencyOnly=true combinedLabel=&quot;fengfu2.5G&quot; mAirplaneMode=false mDataActivity=0 mPhoneSignalIconId=0x7f02034d/com.android.systemui:drawable/stat_sys_signal_null mQSPhoneSignalIconId=0x7f0200b9/com.android.systemui:drawable/ic_qs_signal_no_signal mDataDirectionIconId=0x0/(null) mDataSignalIconId=0x7f02034d/com.android.systemui:drawable/stat_sys_signal_null mDataTypeIconId=0x0/(null) mQSDataTypeIconId=0x0/(null) mNoSimIconId=0x7f020098/com.android.systemui:drawable/ic_qs_no_sim mWifiIconId=0x7f020366/com.android.systemui:drawable/stat_sys_wifi_signal_4_fully mQSWifiIconId=0x7f0200c9/com.android.systemui:drawable/ic_qs_wifi_full_4 mWifiActivityIconId=0x7f02035b/com.android.systemui:drawable/stat_sys_wifi_inout mBluetoothTetherIconId=0x10806ac/android:drawable/stat_sys_tether_bluetooth09-24 17:05:24.117 3974-3974/? D/StatusBar.NetworkController: refreshSignalCluster - setMobileDataIndicators: mHasMobileDataFeature = true mPhoneSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mDataSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mMobileActivityIconId = (null) mDataTypeIconId = (null) mNoSimIconId = com.android.systemui:drawable/ic_qs_no_sim09-24 17:05:24.118 3974-3974/? D/StatusBar.NetworkController: refreshSignalCluster - setMobileDataIndicators: mHasMobileDataFeature = true mPhoneSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mDataSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mMobileActivityIconId = (null) mDataTypeIconId = (null) mNoSimIconId = com.android.systemui:drawable/ic_qs_no_sim09-24 17:05:24.120 3974-3974/? D/StatusBar.NetworkController: refreshSignalCluster - setMobileDataIndicators: mHasMobileDataFeature = true mPhoneSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mDataSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mMobileActivityIconId = (null) mDataTypeIconId = (null) mNoSimIconId = com.android.systemui:drawable/ic_qs_no_sim09-24 17:05:24.120 3974-3974/? D/StatusBar.NetworkController: changing data overlay icon id to 213083836309-24 17:05:24.229 270-270/? I/SurfaceFlinger: FPS: 1609-24 17:05:24.244 3949-3949/? D/PinpadDevice: [Line] : 890; [Func] : loadPlainTextKey; pinpad ext perm check .09-24 17:05:24.244 792-4517/? W/Domain: checkUidPermission(), current state is PS_MOCKUP, we grant permission: com.landi.pinpad.perm.ADMIN_FUNC09-24 17:05:24.259 3949-4024/? D/PinpadDevice: [Line] : 839; [Func] : switchKapToWorkMode; pinpad ext perm check .09-24 17:05:24.259 792-4480/? W/Domain: checkUidPermission(), current state is PS_MOCKUP, we grant permission: com.landi.pinpad.perm.ADMIN_FUNC09-24 17:05:24.297 9631-9631/cn.fengfu.zhejiang.fengfupay I/MainKeyDownload: 主秘钥下装成功！！！！09-24 17:05:24.298 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: step no ------------------下载主秘钥------------------/909-24 17:05:24.298 9631-9631/cn.fengfu.zhejiang.fengfupay I/Timeline: Timeline: Activity_launch_request id:cn.fengfu.zhejiang.fengfupay time:763061809-24 17:05:24.302 792-2322/? I/ActivityManager: START u0 &#123;cmp=cn.fengfu.zhejiang.fengfupay/.unionpay.CustomInfoActivity (has extras)&#125; from uid 10171 on display 009-24 17:05:24.303 792-2322/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.488 3970-4044/? W/!MCSER!: SECURITY## a client is using &apos;oneway&apos;!09-24 17:05:24.489 9631-9631/cn.fengfu.zhejiang.fengfupay I/ViewRootImpl: CPU Rendering VSync enable = true09-24 17:05:24.493 9631-9631/cn.fengfu.zhejiang.fengfupay I/jiang.fengfupay: type=1400 audit(0.0:898): avc: denied &#123; write &#125; for name=&quot;delay&quot; dev=&quot;sysfs&quot; ino=20258 scontext=u:r:untrusted_app:s0 tcontext=u:object_r:sysfs:s0 tclass=file permissive=109-24 17:05:24.600 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.601 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.606 792-816/? I/ActivityManager: Displayed cn.fengfu.zhejiang.fengfupay/.unionpay.CustomInfoActivity: +283ms09-24 17:05:24.607 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.640 792-4406/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.720 4135-4135/? D/wpa_supplicant: wlan0: Control interface command &apos;SIGNAL_POLL&apos;09-24 17:05:24.729 792-4355/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.737 792-4517/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.737 3974-3974/? D/StatusBar.NetworkController: onReceive action:android.net.wifi.RSSI_CHANGED09-24 17:05:24.738 9631-9631/cn.fengfu.zhejiang.fengfupay I/Timeline: Timeline: Activity_idle id: android.os.BinderProxy@1d64a163 time:763105809-24 17:05:24.739 3974-3974/? D/StatusBar.NetworkController: hasService: mServiceState=1 1 home null null null Unknown Unknown CSS not supported -1 -1 RoamInd=-1 DefRoamInd=-1 EmergOnly=true retVal=false09-24 17:05:24.742 3974-3974/? D/StatusBar.NetworkController: refreshViews: Data not connected!! Set no data type icon / Roaming09-24 17:05:24.743 3974-3974/? D/StatusBar.NetworkController: refreshViews connected=&#123; wifi &#125; level=4 combinedSignalIconId=0x7f020364/com.android.systemui:drawable/stat_sys_wifi_signal_3_fully combinedActivityIconId=0x7f02035b mobileLabel=只能拨打紧急呼救电话 wifiLabel=&quot;fengfu2.5G&quot; emergencyOnly=true combinedLabel=&quot;fengfu2.5G&quot; mAirplaneMode=false mDataActivity=0 mPhoneSignalIconId=0x7f02034d/com.android.systemui:drawable/stat_sys_signal_null mQSPhoneSignalIconId=0x7f0200b9/com.android.systemui:drawable/ic_qs_signal_no_signal mDataDirectionIconId=0x0/(null) mDataSignalIconId=0x7f02034d/com.android.systemui:drawable/stat_sys_signal_null mDataTypeIconId=0x0/(null) mQSDataTypeIconId=0x0/(null) mNoSimIconId=0x7f020098/com.android.systemui:drawable/ic_qs_no_sim mWifiIconId=0x7f020364/com.android.systemui:drawable/stat_sys_wifi_signal_3_fully mQSWifiIconId=0x7f0200c8/com.android.systemui:drawable/ic_qs_wifi_full_3 mWifiActivityIconId=0x7f02035b/com.android.systemui:drawable/stat_sys_wifi_inout mBluetoothTetherIconId=0x10806ac/android:drawable/stat_sys_tether_bluetooth09-24 17:05:24.745 3974-3974/? D/StatusBar.NetworkController: refreshSignalCluster - setMobileDataIndicators: mHasMobileDataFeature = true mPhoneSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mDataSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mMobileActivityIconId = (null) mDataTypeIconId = (null) mNoSimIconId = com.android.systemui:drawable/ic_qs_no_sim09-24 17:05:24.748 3974-3974/? D/StatusBar.NetworkController: refreshSignalCluster - setMobileDataIndicators: mHasMobileDataFeature = true mPhoneSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mDataSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mMobileActivityIconId = (null) mDataTypeIconId = (null) mNoSimIconId = com.android.systemui:drawable/ic_qs_no_sim09-24 17:05:24.750 3974-3974/? D/StatusBar.NetworkController: refreshSignalCluster - setMobileDataIndicators: mHasMobileDataFeature = true mPhoneSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mDataSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mMobileActivityIconId = (null) mDataTypeIconId = (null) mNoSimIconId = com.android.systemui:drawable/ic_qs_no_sim09-24 17:05:24.844 792-816/? I/Timeline: Timeline: Activity_windows_visible id: ActivityRecord&#123;3f9bb624 u0 cn.fengfu.zhejiang.fengfupay/.unionpay.CustomInfoActivity t3&#125; time:763116309-24 17:05:24.844 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.852 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:24.859 270-270/? W/SurfaceFlinger: couldn&apos;t log to binary event log: overflow.09-24 17:05:24.860 270-270/? W/SurfaceFlinger: couldn&apos;t log to binary event log: overflow.09-24 17:05:24.867 792-816/? I/WindowManager: change applyWindow to TRUE!09-24 17:05:25.116 3974-3974/? D/StatusBar.NetworkController: hasService: mServiceState=1 1 home null null null Unknown Unknown CSS not supported -1 -1 RoamInd=-1 DefRoamInd=-1 EmergOnly=true retVal=false09-24 17:05:25.118 3974-3974/? D/StatusBar.NetworkController: refreshViews: Data not connected!! Set no data type icon / Roaming09-24 17:05:25.119 3974-3974/? D/StatusBar.NetworkController: refreshViews connected=&#123; wifi &#125; level=4 combinedSignalIconId=0x7f020364/com.android.systemui:drawable/stat_sys_wifi_signal_3_fully combinedActivityIconId=0x7f02035a mobileLabel=只能拨打紧急呼救电话 wifiLabel=&quot;fengfu2.5G&quot; emergencyOnly=true combinedLabel=&quot;fengfu2.5G&quot; mAirplaneMode=false mDataActivity=0 mPhoneSignalIconId=0x7f02034d/com.android.systemui:drawable/stat_sys_signal_null mQSPhoneSignalIconId=0x7f0200b9/com.android.systemui:drawable/ic_qs_signal_no_signal mDataDirectionIconId=0x0/(null) mDataSignalIconId=0x7f02034d/com.android.systemui:drawable/stat_sys_signal_null mDataTypeIconId=0x0/(null) mQSDataTypeIconId=0x0/(null) mNoSimIconId=0x7f020098/com.android.systemui:drawable/ic_qs_no_sim mWifiIconId=0x7f020364/com.android.systemui:drawable/stat_sys_wifi_signal_3_fully mQSWifiIconId=0x7f0200c8/com.android.systemui:drawable/ic_qs_wifi_full_3 mWifiActivityIconId=0x7f02035a/com.android.systemui:drawable/stat_sys_wifi_in mBluetoothTetherIconId=0x10806ac/android:drawable/stat_sys_tether_bluetooth09-24 17:05:25.122 3974-3974/? D/StatusBar.NetworkController: refreshSignalCluster - setMobileDataIndicators: mHasMobileDataFeature = true mPhoneSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mDataSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mMobileActivityIconId = (null) mDataTypeIconId = (null) mNoSimIconId = com.android.systemui:drawable/ic_qs_no_sim09-24 17:05:25.123 3974-3974/? D/StatusBar.NetworkController: refreshSignalCluster - setMobileDataIndicators: mHasMobileDataFeature = true mPhoneSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mDataSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mMobileActivityIconId = (null) mDataTypeIconId = (null) mNoSimIconId = com.android.systemui:drawable/ic_qs_no_sim09-24 17:05:25.126 3974-3974/? D/StatusBar.NetworkController: refreshSignalCluster - setMobileDataIndicators: mHasMobileDataFeature = true mPhoneSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mDataSignalIconId = com.android.systemui:drawable/stat_sys_signal_null mMobileActivityIconId = (null) mDataTypeIconId = (null) mNoSimIconId = com.android.systemui:drawable/ic_qs_no_sim09-24 17:05:25.126 3974-3974/? D/StatusBar.NetworkController: changing data overlay icon id to 213083836209-24 17:05:25.261 270-270/? I/SurfaceFlinger: FPS: 2809-24 17:05:25.335 4382-4382/? D/PinEntryService: handleMessage() : to hide dlg.09-24 17:05:25.489 9631-9631/cn.fengfu.zhejiang.fengfupay D/Transaction: transaction finished --------------下载主秘钥------- success-------------------/10 XML 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373&lt;Transaction name=&quot;消费&quot; emv=&quot;SALE&quot; qPBOC=&quot;SALE&quot; settleType=&quot;1&quot; supportEC=&quot;@context/supportEC&quot; supportMixCard=&quot;@context/supportMixCard&quot; supportMobile=&quot;@context/supportMobile&quot; supportPBOCFirst=&quot;@context/supportPBOCFirst&quot; switchFlag=&quot;sale&quot;&gt; &lt;step ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.view.InputBankPayAmtActivity&quot;&gt; &lt;interceptor class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.ImportAmount&quot;&gt;&lt;/interceptor&gt; &lt;result name=&quot;skip&quot; goAhead=&quot;true&quot;&gt;&lt;/result&gt; &lt;/step&gt; &lt;!-- 如果是屏保界面进来的，cardType为磁卡就要先显示卡号再输入金额 --&gt; &lt;!-- &lt;step ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.InputAmountActivity&quot;&gt; &lt;condition value=&quot;@context/cardSearched&quot; notEquals=&quot;磁卡&quot;&gt;&lt;/condition&gt; &lt;interceptor class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.ImportAmount&quot;&gt;&lt;/interceptor&gt; &lt;param name=&quot;hint&quot;&gt;请输入金额&lt;/param&gt; &lt;result name=&quot;skip&quot; goAhead=&quot;true&quot;&gt;&lt;/result&gt; &lt;/step&gt; --&gt; &lt;make value=&quot;@context/cardInputHint&quot;&gt; &lt;condition equals=&quot;true&quot; value=&quot;@context/supportMixCard&quot;&gt;&lt;/condition&gt; &lt;condition notEquals=&quot;true&quot; value=&quot;@app/supportScanPay&quot;&gt;&lt;/condition&gt; &lt;data value=&quot;请插卡或刷卡或挥卡&quot;&gt;&lt;/data&gt; &lt;/make&gt; &lt;make value=&quot;@context/primIM&quot;&gt; &lt;condition equals=&quot;@null&quot; value=&quot;@context/primIM&quot;&gt;&lt;/condition&gt; &lt;condition notEquals=&quot;true&quot; value=&quot;@app/supportScanPay&quot;&gt;&lt;/condition&gt; &lt;data value=&quot;磁卡|接触|非接&quot;&gt;&lt;/data&gt; &lt;/make&gt; &lt;make value=&quot;@context/primIM&quot;&gt; &lt;condition equals=&quot;@null&quot; value=&quot;@context/primIM&quot;&gt;&lt;/condition&gt; &lt;condition equals=&quot;true&quot; value=&quot;@app/supportScanPay&quot;&gt;&lt;/condition&gt; &lt;data value=&quot;磁卡|接触|扫码|非接&quot;&gt;&lt;/data&gt; &lt;/make&gt; &lt;!-- 刷卡 --&gt; &lt;step ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.InputCardActivity&quot;&gt; &lt;!-- 磁卡|接触|非接|手机芯片 --&gt; &lt;param name=&quot;hint&quot; value=&quot;@context/cardInputHint&quot;&gt;&lt;/param&gt; &lt;param name=&quot;cardType&quot; value=&quot;@context/primIM&quot;&gt;&lt;/param&gt; &lt;param name=&quot;cardSearched&quot; value=&quot;@context/cardSearched&quot;&gt;&lt;/param&gt;&lt;!-- 屏保界面可能已经输过卡 --&gt; &lt;!-- 脱机 --&gt; &lt;result name=&quot;AAC&quot; goto=&quot;offline&quot;&gt;&lt;/result&gt; &lt;result name=&quot;TC&quot; goto=&quot;offline&quot;&gt;&lt;/result&gt; &lt;result name=&quot;ARQC&quot; goAhead=&quot;true&quot;&gt;&lt;/result&gt; &lt;/step&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.Comm&quot; method=&quot;preDial&quot; /&gt; &lt;!-- &lt;step ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.InputAmountActivity&quot;&gt; &lt;condition value=&quot;@context/cardSearched&quot; equals=&quot;磁卡&quot;&gt;&lt;/condition&gt; &lt;condition value=&quot;@context/isInEmvProcess&quot; equals=&quot;@null&quot;&gt;&lt;/condition&gt; &lt;param name=&quot;hint&quot;&gt;请输入金额&lt;/param&gt; &lt;/step&gt; --&gt; &lt;make value=&quot;@context/_pan&quot;&gt; &lt;condition notEquals=&quot;96&quot; value=&quot;@context/im_pan&quot;&gt;&lt;/condition&gt; &lt;data value=&quot;@context/pan&quot;&gt;&lt;/data&gt; &lt;/make&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.MakeTransName&quot; method=&quot;makeSaleName&quot; /&gt; &lt;!-- 非EMV流程 --&gt; &lt;!-- 输入PIN --&gt; &lt;step id=&quot;inputPin&quot; ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.InputPinActivity&quot;&gt; &lt;condition notEquals=&quot;07&quot; value=&quot;@context/im_pan&quot;&gt;&lt;/condition&gt; &lt;condition notEquals=&quot;03&quot; value=&quot;@context/im_pan&quot;&gt;&lt;/condition&gt; &lt;condition equals=&quot;@null&quot; value=&quot;@context/isInEmvProcess&quot;&gt;&lt;/condition&gt; &lt;interceptor class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.ReInputPinCheck&quot;&gt;&lt;/interceptor&gt; &lt;param name=&quot;pan&quot; value=&quot;@context/_pan&quot;&gt;&lt;/param&gt; &lt;/step&gt; &lt;step field=&quot;0&quot; value=&quot;0200&quot;&gt;&lt;/step&gt; &lt;step field=&quot;2&quot; value=&quot;@context/pan&quot;&gt; &lt;condition notEquals=&quot;02&quot; value=&quot;@context/im_pan&quot;&gt;&lt;/condition&gt; &lt;/step&gt; &lt;step field=&quot;3&quot; value=&quot;000000&quot;&gt;&lt;/step&gt; &lt;step field=&quot;4&quot; value=&quot;@context/amount&quot;&gt;&lt;/step&gt; &lt;make delay=&quot;true&quot; field=&quot;11&quot;&gt; &lt;data value=&quot;@app/traceNo&quot;&gt;&lt;/data&gt; &lt;/make&gt; &lt;DEBUG msg=&quot;@context/expiredDate&quot;&gt;&lt;/DEBUG&gt; &lt;step field=&quot;14&quot; value=&quot;@context/expiredDate&quot;&gt;&lt;/step&gt; &lt;make field=&quot;22&quot;&gt; &lt;data value=&quot;@context/im_pan&quot;&gt;&lt;/data&gt; &lt;data value=&quot;@context/im_pin&quot;&gt;&lt;/data&gt; &lt;/make&gt; &lt;step field=&quot;23&quot; value=&quot;@context/cardSn&quot;&gt;&lt;/step&gt; &lt;step field=&quot;25&quot; value=&quot;00&quot;&gt;&lt;/step&gt; &lt;step field=&quot;26&quot; value=&quot;@app/maxPinLen&quot;&gt; &lt;condition equals=&quot;1&quot; value=&quot;@context/im_pin&quot;&gt;&lt;/condition&gt; &lt;/step&gt; &lt;step field=&quot;35&quot; value=&quot;@context/track2&quot;&gt;&lt;/step&gt; &lt;step field=&quot;36&quot; value=&quot;@context/track3&quot;&gt;&lt;/step&gt; &lt;step field=&quot;41&quot; value=&quot;@app/terminalId&quot;&gt;&lt;/step&gt; &lt;step field=&quot;42&quot; value=&quot;@app/merchantId&quot;&gt;&lt;/step&gt; &lt;step field=&quot;49&quot; value=&quot;156&quot;&gt;&lt;/step&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.MakeField&quot; field=&quot;46&quot; method=&quot;makeField46&quot;&gt; &lt;condition notEquals=&quot;010&quot; value=&quot;@context/in.merchantOrderNo&quot;&gt;&lt;/condition&gt; &lt;/step&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.MakePinData&quot; field=&quot;52&quot; method=&quot;makeField52&quot;&gt; &lt;param name=&quot;pin&quot; value=&quot;@context/pin&quot;&gt;&lt;/param&gt; &lt;/step&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.MakePinData&quot; field=&quot;59&quot; method=&quot;makeField59&quot;&gt; &lt;param name=&quot;pin&quot; value=&quot;@context/pin&quot;&gt;&lt;/param&gt; &lt;param name=&quot;C2BCode&quot; value=&quot;@context/C2BCode&quot;&gt;&lt;/param&gt; &lt;/step&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.MakeField&quot; field=&quot;53&quot; method=&quot;makeField53&quot;&gt; &lt;/step&gt; &lt;make field=&quot;55&quot;&gt; &lt;data value=&quot;@context/icTLV&quot;&gt;&lt;/data&gt; &lt;/make&gt; &lt;make field=&quot;60&quot;&gt; &lt;condition notEquals=&quot;03&quot; value=&quot;@context/im_pan&quot;&gt;&lt;/condition&gt; &lt;data value=&quot;22&quot;&gt;&lt;/data&gt; &lt;data value=&quot;@app/batchNo&quot;&gt;&lt;/data&gt; &lt;data value=&quot;000&quot;&gt;&lt;/data&gt; &lt;!-- 60.3网络管理 --&gt; &lt;data value=&quot;@app/terminalCap&quot;&gt;&lt;/data&gt; &lt;!-- 60.4终端读取能力 --&gt; &lt;data value=&quot;@context/icCondition&quot;&gt;&lt;/data&gt; &lt;data value=&quot;1&quot;&gt;&lt;/data&gt; &lt;/make&gt; &lt;make field=&quot;60&quot;&gt; &lt;condition equals=&quot;03&quot; value=&quot;@context/im_pan&quot;&gt;&lt;/condition&gt; &lt;data value=&quot;22&quot;&gt;&lt;/data&gt; &lt;data value=&quot;@app/batchNo&quot;&gt;&lt;/data&gt; &lt;data value=&quot;000&quot;&gt;&lt;/data&gt; &lt;!-- 60.3网络管理 --&gt; &lt;/make&gt; &lt;step field=&quot;64&quot; value=&quot;0000000000000000&quot;&gt;&lt;/step&gt; &lt;make value=&quot;@context/reversal_f55&quot;&gt; &lt;condition equals=&quot;96&quot; value=&quot;@context/im_pan&quot;&gt;&lt;/condition&gt; &lt;data value=&quot;@context/icTLV&quot;&gt;&lt;/data&gt; &lt;/make&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.CheckQPSSignNeed&quot;&gt;&lt;/step&gt; &lt;step animation=&quot;none&quot; ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.CommunicateActivity&quot;&gt;&lt;/step&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.OfflineProcess&quot; id=&quot;offline&quot;&gt; &lt;condition match=&quot;AAC|TC&quot; value=&quot;@context/acResult&quot;&gt;&lt;/condition&gt; &lt;/step&gt; &lt;make value=&quot;balance&quot;&gt; &lt;condition equals=&quot;电子现金消费&quot; value=&quot;@context/offlineName&quot;&gt;&lt;/condition&gt; &lt;data value=&quot;0000000C&quot;&gt;&lt;/data&gt; &lt;data value=&quot;@context/emv.ec_balance&quot;&gt;&lt;/data&gt; &lt;/make&gt; &lt;step animation=&quot;none&quot; ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.ShowBalanceActivity&quot;&gt; &lt;condition notEquals=&quot;success&quot; value=&quot;@context/commStatus&quot;&gt;&lt;/condition&gt; &lt;condition equals=&quot;电子现金消费&quot; value=&quot;@context/offlineName&quot;&gt;&lt;/condition&gt; &lt;condition notEquals=&quot;@null&quot; value=&quot;@context/emv.ec_balance&quot;&gt;&lt;/condition&gt; &lt;param name=&quot;hint&quot; value=&quot;交易成功\\n现金余额为:&quot;&gt;&lt;/param&gt; &lt;param name=&quot;amount&quot; value=&quot;@context/balance&quot;&gt;&lt;/param&gt; &lt;param name=&quot;waitCardOut&quot;&gt;true&lt;/param&gt; &lt;/step&gt; &lt;!-- 部分承兑 --&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.MakePartAcceptInfo&quot;&gt; &lt;condition equals=&quot;@respField/39&quot; value=&quot;10&quot;&gt;&lt;/condition&gt; &lt;/step&gt; &lt;step animation=&quot;none&quot; ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.ConfirmActivity&quot;&gt; &lt;condition equals=&quot;@respField/39&quot; value=&quot;10&quot;&gt;&lt;/condition&gt; &lt;param name=&quot;hint&quot; value=&quot;@context/partAcceptConfirmInfo&quot;&gt;&lt;/param&gt; &lt;param name=&quot;output&quot; value=&quot;isAccept&quot;&gt;&lt;/param&gt; &lt;/step&gt; &lt;step animation=&quot;none&quot; ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.ConfirmActivity&quot;&gt; &lt;condition equals=&quot;YES&quot; value=&quot;@context/isAccept&quot;&gt;&lt;/condition&gt; &lt;param name=&quot;hint&quot; value=&quot;@context/partAcceptInfo&quot;&gt;&lt;/param&gt; &lt;/step&gt; &lt;step ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.SignPanelActivity&quot;&gt; &lt;condition notEquals=&quot;true&quot; value=&quot;@context/isQPSNotNeedSign&quot;&gt;&lt;/condition&gt; &lt;condition notEquals=&quot;TC&quot; value=&quot;@context/icResult&quot;&gt;&lt;/condition&gt; &lt;condition equals=&quot;true&quot; value=&quot;@app/isSupportSignData&quot;&gt;&lt;/condition&gt; &lt;param name=&quot;settleDate&quot;&gt;@respField/15&lt;/param&gt; &lt;param name=&quot;referenceNum&quot;&gt;@respField/37&lt;/param&gt; &lt;result name=&quot;skip&quot; goAhead=&quot;true&quot;&gt;&lt;/result&gt; &lt;/step&gt; &lt;step ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.CustomInputActivity&quot;&gt; &lt;condition notEquals=&quot;TC&quot; value=&quot;@context/icResult&quot;&gt;&lt;/condition&gt; &lt;condition equals=&quot;true&quot; value=&quot;@app/isSupportSignData&quot;&gt;&lt;/condition&gt; &lt;condition equals=&quot;true&quot; value=&quot;@context/needInputPhone&quot;&gt;&lt;/condition&gt; &lt;condition notEquals=&quot;true&quot; value=&quot;@context/isQPSNotNeedSign&quot;&gt;&lt;/condition&gt; &lt;param name=&quot;hint&quot;&gt;请输入手机号&lt;/param&gt; &lt;param name=&quot;hint2&quot;&gt;可按【取消】键跳过&lt;/param&gt; &lt;param name=&quot;inputType&quot; value=&quot;NUM11&quot;&gt;&lt;/param&gt; &lt;param name=&quot;padding&quot; value=&quot;F&quot;&gt;&lt;/param&gt; &lt;param name=&quot;autoPadding&quot; value=&quot;right&quot;&gt;&lt;/param&gt; &lt;param name=&quot;minlen&quot; value=&quot;11&quot;&gt;&lt;/param&gt; &lt;param name=&quot;minlenHint&quot;&gt;请输入11位手机号&lt;/param&gt; &lt;param name=&quot;output&quot; value=&quot;sign_phone&quot;&gt;&lt;/param&gt; &lt;param name=&quot;onCancel&quot; value=&quot;next&quot;&gt;&lt;/param&gt; &lt;/step&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.SaveSignData&quot; method=&quot;saveSignData&quot;&gt; &lt;condition notEquals=&quot;TC&quot; value=&quot;@context/icResult&quot;&gt;&lt;/condition&gt; &lt;condition equals=&quot;true&quot; value=&quot;@app/isSupportSignData&quot;&gt;&lt;/condition&gt; &lt;/step&gt; &lt;step class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.MakeTemplateName&quot; /&gt; &lt;step animation=&quot;none&quot; ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.PrinterActivity&quot;&gt; &lt;param name=&quot;hint&quot;&gt;消费成功&lt;/param&gt; &lt;param name=&quot;template&quot; value=&quot;@context/template&quot;&gt;&lt;/param&gt; &lt;/step&gt; &lt;!-- 部分承兑，取消时自动撤销 --&gt; &lt;step transaction=&quot;消费撤销&quot;&gt; &lt;condition equals=&quot;NO&quot; value=&quot;@context/isAccept&quot;&gt;&lt;/condition&gt; &lt;param name=&quot;oldTrace&quot; value=&quot;@respField/11&quot;&gt;&lt;/param&gt; &lt;result name=&quot;error&quot; end=&quot;error&quot;&gt;&lt;/result&gt; &lt;/step&gt; &lt;step transaction=&quot;上送电子签字和离线交易&quot;&gt; &lt;condition equals=&quot;success&quot; value=&quot;@context/commStatus&quot;&gt;&lt;/condition&gt; &lt;param name=&quot;currentTraceNo&quot; value=&quot;@respField/11&quot;&gt;&lt;/param&gt; &lt;/step&gt; &lt;!-- 冲正数据配置，如果交易出问题，下一笔交易会使用这些数据来冲正 --&gt; &lt;reversal use=&quot;自动冲正&quot;&gt; &lt;data id=&quot;原交易名&quot; value=&quot;@attr/name&quot; /&gt; &lt;data id=&quot;主帐号&quot; value=&quot;@field/2&quot;&gt;&lt;/data&gt; &lt;data id=&quot;处理代码&quot; value=&quot;@field/3&quot;&gt;&lt;/data&gt; &lt;data id=&quot;交易金额&quot; value=&quot;@field/4&quot;&gt;&lt;/data&gt; &lt;data id=&quot;流水号&quot; value=&quot;@field/11&quot;&gt;&lt;/data&gt; &lt;data id=&quot;卡有效期&quot; value=&quot;@field/14&quot;&gt;&lt;/data&gt; &lt;!-- &lt;data id=&quot;卡片序列号&quot; value=&quot;@field/23&quot;&gt;&lt;/data&gt; --&gt; &lt;data id=&quot;POS输入方式&quot; value=&quot;@field/22&quot;&gt;&lt;/data&gt; &lt;data id=&quot;服务点条件码&quot; value=&quot;@field/25&quot;&gt;&lt;/data&gt; &lt;data id=&quot;二磁道内容&quot; value=&quot;@field/35&quot;&gt;&lt;/data&gt; &lt;data id=&quot;授权码&quot; value=&quot;@field/38&quot;&gt;&lt;/data&gt; &lt;!-- &lt;data id=&quot;IC卡数据&quot; value=&quot;@context/reversal_f55&quot;&gt;&lt;/data&gt; --&gt; &lt;data id=&quot;商户号&quot; value=&quot;@field/41&quot;&gt;&lt;/data&gt; &lt;data id=&quot;终端号&quot; value=&quot;@field/42&quot;&gt;&lt;/data&gt; &lt;data id=&quot;货币代码&quot; value=&quot;@field/49&quot;&gt;&lt;/data&gt; &lt;!-- &lt;data id=&quot;59域数据&quot; value=&quot;@field/59&quot;&gt;&lt;/data&gt; --&gt; &lt;data id=&quot;60域数据&quot; value=&quot;@field/60&quot;&gt;&lt;/data&gt; &lt;/reversal&gt; &lt;!-- 交易记录配置 --&gt; &lt;!-- 用于记录脱机交易信息 --&gt; &lt;offlineRecord databaseTable=&quot;transaction_data&quot;&gt; &lt;data id=&quot;trace&quot; value=&quot;@app/traceNo&quot;&gt;&lt;/data&gt; &lt;data id=&quot;name&quot; value=&quot;@context/offlineName&quot;&gt;&lt;/data&gt; &lt;data id=&quot;engName&quot; value=&quot;@context/engName&quot;&gt;&lt;/data&gt; &lt;data id=&quot;status&quot; value=&quot;@context/transStatus&quot;&gt;&lt;/data&gt; &lt;data id=&quot;year&quot; value=&quot;@app/datetime(&apos;yyyy&apos;)&quot; /&gt; &lt;data id=&quot;time&quot; value=&quot;@app/datetime(&apos;HHmmss&apos;)&quot; /&gt; &lt;data id=&quot;date&quot; value=&quot;@app/datetime(&apos;MMdd&apos;)&quot; /&gt; &lt;data id=&quot;send&quot; value=&quot;0&quot;&gt;&lt;/data&gt; &lt;data id=&quot;pan&quot; value=&quot;@context/pan&quot;&gt;&lt;/data&gt; &lt;data id=&quot;procCode&quot; value=&quot;@field/3&quot;&gt;&lt;/data&gt; &lt;data id=&quot;operator&quot; value=&quot;@runtime/operator.username&quot;&gt;&lt;/data&gt; &lt;data id=&quot;amount&quot; value=&quot;@context/amount&quot;&gt;&lt;/data&gt; &lt;data id=&quot;expiredDate&quot; value=&quot;@context/expiredDate&quot;&gt;&lt;/data&gt; &lt;data id=&quot;im_pin&quot; value=&quot;@context/im_pin&quot;&gt;&lt;/data&gt; &lt;data id=&quot;im_pan&quot; value=&quot;@context/im_pan&quot;&gt;&lt;/data&gt; &lt;data id=&quot;cardSn&quot; value=&quot;@context/cardSn&quot;&gt;&lt;/data&gt; &lt;data id=&quot;icResult&quot; value=&quot;@context/icResult&quot;&gt;&lt;/data&gt; &lt;data id=&quot;serviceCode&quot; value=&quot;@context/serviceCode&quot;&gt;&lt;/data&gt; &lt;data id=&quot;track2&quot; value=&quot;@context/track2&quot;&gt;&lt;/data&gt; &lt;data id=&quot;track3&quot; value=&quot;@context/track3&quot;&gt;&lt;/data&gt; &lt;data id=&quot;sign_balance&quot; len=&quot;12&quot; offset=&quot;8&quot; value=&quot;@respField/54&quot;&gt;&lt;/data&gt; &lt;data id=&quot;batch&quot; value=&quot;@app/batchNo&quot;&gt;&lt;/data&gt; &lt;data id=&quot;currency&quot; value=&quot;156&quot;&gt;&lt;/data&gt; &lt;data id=&quot;pin&quot; value=&quot;@context/pin&quot;&gt;&lt;/data&gt; &lt;data id=&quot;maxPinLen&quot; value=&quot;@app/maxPinLen&quot;&gt;&lt;/data&gt; &lt;data id=&quot;field55&quot; value=&quot;@context/resultTLV&quot;&gt;&lt;/data&gt; &lt;data id=&quot;cardType&quot; value=&quot;@context/cardType&quot;&gt;&lt;/data&gt; &lt;data id=&quot;cardId&quot; value=&quot;@context/cardId&quot;&gt;&lt;/data&gt; &lt;data id=&quot;icCondition&quot; value=&quot;@context/icCondition&quot;&gt;&lt;/data&gt; &lt;data id=&quot;settleType&quot; value=&quot;@attr/settleType&quot;&gt;&lt;/data&gt; &lt;!-- 电子现金交易特有数据 --&gt; &lt;data id=&quot;balance&quot; value=&quot;@context/emv.ec_balance&quot; /&gt; &lt;trigger class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.IncTraceTrigger&quot;&gt;&lt;/trigger&gt; &lt;/offlineRecord&gt; &lt;record databaseTable=&quot;transaction_data&quot;&gt; &lt;data id=&quot;trace&quot; value=&quot;@respField/11&quot; /&gt; &lt;data id=&quot;name&quot; value=&quot;@context/transName&quot; /&gt; &lt;data id=&quot;engName&quot; value=&quot;@context/engName&quot; /&gt; &lt;data id=&quot;amount&quot; value=&quot;@respField/4&quot; /&gt; &lt;data id=&quot;pan&quot; value=&quot;@respField/2&quot; /&gt; &lt;data id=&quot;procCode&quot; value=&quot;@field/3&quot;&gt;&lt;/data&gt; &lt;data id=&quot;operator&quot; value=&quot;@runtime/operator.username&quot;&gt;&lt;/data&gt; &lt;data id=&quot;year&quot; value=&quot;@app/datetime(&apos;yyyy&apos;)&quot; /&gt; &lt;data id=&quot;time&quot; value=&quot;@respField/12&quot; /&gt; &lt;data id=&quot;date&quot; value=&quot;@respField/13&quot; /&gt; &lt;data id=&quot;expiredDate&quot; value=&quot;@respField/14&quot;&gt;&lt;/data&gt; &lt;data id=&quot;settleDate&quot; value=&quot;@respField/15&quot;&gt;&lt;/data&gt; &lt;data id=&quot;expiredDateInput&quot; value=&quot;@field/14&quot;&gt;&lt;/data&gt; &lt;data id=&quot;referenceNo&quot; value=&quot;@respField/37&quot; /&gt; &lt;data id=&quot;status&quot; value=&quot;*&quot; /&gt; &lt;data id=&quot;authorizationCode&quot; value=&quot;@respField/38&quot;&gt;&lt;/data&gt; &lt;data id=&quot;issuerMsg&quot; len=&quot;20&quot; offset=&quot;3&quot; value=&quot;@respField/63&quot;&gt;&lt;/data&gt; &lt;data id=&quot;cupMsg&quot; len=&quot;20&quot; offset=&quot;23&quot; value=&quot;@respField/63&quot;&gt;&lt;/data&gt; &lt;data id=&quot;aquMsg&quot; len=&quot;20&quot; offset=&quot;43&quot; value=&quot;@respField/63&quot;&gt;&lt;/data&gt; &lt;data id=&quot;issuerId&quot; len=&quot;11&quot; offset=&quot;0&quot; value=&quot;@respField/44&quot;&gt;&lt;/data&gt; &lt;data id=&quot;acqId&quot; len=&quot;11&quot; offset=&quot;11&quot; value=&quot;@respField/44&quot;&gt;&lt;/data&gt; &lt;data id=&quot;posCenter&quot; value=&quot;@respField/32&quot;&gt;&lt;/data&gt; &lt;data id=&quot;im_pin&quot; value=&quot;@context/im_pin&quot;&gt;&lt;/data&gt; &lt;data id=&quot;im_pan&quot; value=&quot;@context/im_pan&quot;&gt;&lt;/data&gt; &lt;data id=&quot;sign_balance&quot; len=&quot;12&quot; offset=&quot;8&quot; value=&quot;@respField/54&quot;&gt;&lt;/data&gt; &lt;data id=&quot;field55&quot; value=&quot;@context/resultTLV&quot;&gt;&lt;/data&gt; &lt;data id=&quot;cardType&quot; value=&quot;@context/cardType&quot;&gt;&lt;/data&gt; &lt;data id=&quot;cardId&quot; value=&quot;@context/cardId&quot;&gt;&lt;/data&gt; &lt;data id=&quot;icResult&quot; value=&quot;@context/icResult&quot;&gt;&lt;/data&gt; &lt;data id=&quot;settleType&quot; value=&quot;@attr/settleType&quot;&gt;&lt;/data&gt; &lt;data id=&quot;icCondition&quot; value=&quot;@context/icCondition&quot;&gt;&lt;/data&gt; &lt;data id=&quot;batch&quot; value=&quot;@app/batchNo&quot;&gt;&lt;/data&gt; &lt;data id=&quot;currency&quot; value=&quot;@respField/49&quot;&gt;&lt;/data&gt; &lt;data id=&quot;cardSn&quot; value=&quot;@context/cardSn&quot;&gt;&lt;/data&gt; &lt;data id=&quot;balance&quot; len=&quot;12&quot; offset=&quot;8&quot; value=&quot;@respField/54&quot;&gt;&lt;/data&gt; &lt;!-- 是否非接qps业务，重打印判断用 --&gt; &lt;data id=&quot;isQPSTrans&quot; value=&quot;@context/isQPSTrans&quot;&gt;&lt;/data&gt; &lt;!-- 扫码支付 --&gt; &lt;trigger class=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.executable.SavePaymentVoucherTrigger&quot; when=&quot;before&quot;&gt;&lt;/trigger&gt; &lt;data id=&quot;C2BCode&quot; value=&quot;@context/C2BCode&quot;&gt;&lt;/data&gt; &lt;data id=&quot;payCodeNo&quot; value=&quot;@context/payCodeNo&quot;&gt;&lt;/data&gt; &lt;data id=&quot;scanPayStatus&quot; value=&quot;true&quot;&gt;&lt;/data&gt; &lt;!-- 未付金额，电子签字上送报文用 --&gt; &lt;data id=&quot;remark&quot; value=&quot;@context/unPayAmount&quot;&gt;&lt;/data&gt; &lt;data id=&quot;creatDate&quot; value=&quot;@context/creatDate&quot;&gt;&lt;/data&gt; &lt;/record&gt; &lt;!-- 全局设置，目前支持param、result，优先级低于局部设置 --&gt; &lt;global&gt; &lt;param name=&quot;title&quot; value=&quot;@context/title&quot;&gt;&lt;/param&gt; &lt;result name=&quot;dispEmvError&quot; ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.ShowEmvErrorActivity&quot;&gt;&lt;/result&gt; &lt;result name=&quot;error&quot; ui=&quot;cn.fengfu.zhejiang.fengfupay.unionpay.CustomInfoActivity&quot;&gt; &lt;param name=&quot;timeout&quot; value=&quot;0&quot; /&gt; &lt;param name=&quot;info&quot; value=&quot;@context/error&quot;&gt;&lt;/param&gt; &lt;param name=&quot;type&quot; value=&quot;BACK&quot;&gt;&lt;/param&gt; &lt;/result&gt; &lt;result name=&quot;pwd_error&quot; goto=&quot;inputPin&quot;&gt;&lt;/result&gt; &lt;/global&gt;&lt;/Transaction&gt; BaseParser【sax解析】 TransactionParser 解析 Transaction 支付宝刷脸支付","categories":[],"tags":[{"name":"工作","slug":"工作","permalink":"http://joinyon.top/tags/工作/"}],"keywords":[]},{"title":"Java基础知识汇总","slug":"Java基础知识汇总","date":"2019-02-18T01:21:24.000Z","updated":"2019-08-03T08:20:58.946Z","comments":true,"path":"2019/02/18/Java基础知识汇总/","link":"","permalink":"http://joinyon.top/2019/02/18/Java基础知识汇总/","excerpt":"","text":"java基础项目一、Java环境搭建 基础知识 JAVA环境的搭建 Hello World 小程序 二、JAVA基本语法 重点掌握关键字、标识符 了解常量、进制转换 重点掌握变量、数据类型、类型转换。 重点掌握运算符、转义字符 运算符优先级 三、分支语句 JAVA语句有哪些结构 掌握分支结构 掌握if语句的用法 掌握switch语句的用法 四、循环语句 什么是循环语句 掌握for循环 掌握while循环 掌握do-while循环 掌握break语句 掌握continue语句 五、方法的使用 什么是方法 掌握方法的声明 掌握方法的调用 掌握什么是方法重载 了解递归算法 六、面向对象(一) 重点掌握面向对象设计思想 重点掌握类和对象的理解 重点掌握如何创建一个对象 重点掌握JAVA类中的成员变量和方法 重点掌握构造方法 重点掌握类的封装性 七、面向对象(二) 重点掌握内存分析 重点掌握this关键字 重点掌握方法的参数传递 重点掌握static关键字 重点掌握包 画内存分析图 八、面向对象(三) 重点掌握继承 重点掌握super关键字 重点掌握访问权限 重点掌握方法重写 九、面向对象(四) 重点掌握Object类 重点掌握对象转型 重点掌握抽象类和抽象方法 重点掌握final关键字 重点掌握接口 十、面向对象(五) 重点掌握多态 重点掌握内部类 重点掌握单例模式 重点掌握简单工厂模式 掌握内部类的应用场景 了解接口回调的原理 十一、数组 掌握JAVA中数组概念 掌握JAVA 中一维数组的声明和使用 掌握JAVA 中数组的排序：冒泡，插入，选择 掌握JAVA中数组的搜索：顺序，二分搜索法 十二、二维数组和异常机制 掌握JAVA中二维数组的简单使用 掌握JAVA中数组的工具类Arrays，System类 掌握JAVA中的异常机制 掌握JAVA中异常的处理 了解JAVA中自定义异常 十三、常用类 掌握JAVA基本数据类型与其对应的包装类 掌握JAVA字符串类：String,StringBuffer,StringBuilder 了解JAVA中常用的类：Math, Date,Calendar,SimpleDateFormat 了解JAVA中常用类：Random，Runtime，System 了解正则表达式的简单实用 了解什么是枚举 十四、集合类-List 掌握JAVA中集合的概念以及集合框架的介绍 掌握Collection接口的使用 掌握List接口的存储特点 掌握集合中泛型的使用 掌握迭代器Iterator的工作原理以及使用 掌握List接口的常用实现类，ArrayList以及LinkedList的实现方式以及存储特点 了解Vector以及Stack的使用 十五、集合类-Set 掌握Set集合的存储特点 掌握TreeSet的实现原理 掌握Comparable接口的使用 掌握Comparator接口的使用 了解LinkedHashSet实现类 十六、Map集合 了解Map集合的特点 掌握Map集合的常用方法 掌握获取集合对象的几种方式 掌握Map集合的常用类:HashMap和TreeMap 十七、IO流(一) 掌握File类和常用方法 掌握IO流的概念和原理 了解IO流的分类 掌握字节流的常用方法 掌握字符流的常用方法 掌握文件流 十八、IO流(二) 掌握转换流 掌握字节缓存流和字符缓存流 了解标准输入输出流:System.in和System.out 十九、IO流(三) 掌握内存流的使用 了解打印流的使用 掌握对象序列化 了解对象流 掌握RandomAccessFile 了解装饰者模式 二十、总结 画内存图 正则表达式 二十一、多线程-初步 掌握JAVA中进程的概念 掌握JAVA中线程的概念 掌握线程的创建方式 掌握线程的优先级 掌握线程的常用方法 掌握线程的生命周期 掌握线程的停止 二十二、多线程-数据安全 掌握JAVA中多线程间的数据安全 掌握synchronized关键字 掌握同步方法 掌握同步代码块 掌握互斥锁 了解死锁 了解ThreadLocal类 二十三、多线程-生产者消费者模型 掌握生产者消费者模型 掌握线程等待 掌握线程唤醒 了解守护线程 二十四、网络编程-TCP 了解网络的概念 了解网络通信协议 了解TCP/IP协议 了解IP地址和端口号 掌握Socket 掌握ServerSocket 二十五、网络编程-UDP 了解UDP编程 飞秋练习：多客户端聊天，多线程下载 二十六、HTML&amp;SQLite 掌握HTML的表格，表单，列表标签 了解HTML样式的使用：CSS 掌握SQLite数据库 了解create创建表语句 了解alter修改表结构语句 重点掌握SQL增删改查语句 二十七、Servlet&amp;网络访问 了解B/S和C/S结构 Tomcat的作用 掌握Servlet的生命周期 掌握Servlet的应用 掌握URL类和常用方法 掌握HttpURLConnection类获取网络资源 二十八、HttpClient 了解HttpClient类 了解HttpClient与HttpURLConnection的区别 掌握HttpClient的get请求获取资源 掌握HttpClient的post请求获取资源 掌握接口回调在网络下载中的使用 掌握HttpClient接口回调方式下载网络资源 掌握文件上传的客户端实现 二十九、XML解析(SAX&amp;PULL) 了解XML 掌握XML语法定义 掌握SAX解析原理 掌握PULL解析原理 三十、反射机制&amp; JSON解析 了解反射的使用 了解JSON数据格式 了解JSON与XML之间的比较 掌握JSON解析","categories":[],"tags":[],"keywords":[]},{"title":"ISO8583","slug":"ISO8583","date":"2018-12-22T08:17:03.000Z","updated":"2019-09-10T08:30:10.526Z","comments":true,"path":"2018/12/22/ISO8583/","link":"","permalink":"http://joinyon.top/2018/12/22/ISO8583/","excerpt":"","text":"支付小常识银联终端规范8583报文手动组包报文组成:报文头【长度（2字节）+TPDU（5字节）+报文版本号（2字节）】+信息类型+位图+数据 报文长度：整体报文长度 -报文头中的2字节长度。如8583整体报文长度为100，那么报文长度为98.用两字节的BCD码表示（16进制）为0062。 报文中容易出错的在于银联规范中的各种数据格式，定长、变长、ASCII变长、以及TLV格式等。在组包或者解包前，仔细看规范是十分重要的。 报文 是十六进制1234567891011121314151617012F //报文长度 303个字节长度 6005010000 //APP_TPDU603200321301 //Hearder0200 //信息类型7024068020C08A33 //位图16 6214835892690379 //LV 长度-值 主账号0000000000000000010000452607072000000037 6214835892690379D2607220149390048665603130303036303439313132333330313730313130303036313536060000000000000001349F2608FC9AA64AF938FB069F2701809F101307011703A00000010A010000000000ABB4EC9B9F3704C3C302089F36020055950500000000009A031908199C01009F02060000000000015F2A02015682027C009F1A0201569F03060000000000009F3303E0F1C89F3501229F1E0830383230303230318408A0000003330101019F41043030303000404132303335303130303230343032303130303832303032303131393035303038333230303031202000142200000100060000033031203034413941393735 12345678910111213141516171819202122232425262728293031323334350144 6005010000 // APP_TPDU603200321301 //Hearder02007024068020C08A3319623078010001342312500000000000000000010000502612072000010037 6230780100013423125D261222029618000010313030303630343931313233333031373031313030303631353606000000000000000153 9F26 08FD1E09B83B3EA9519F27 01809F101307010103A00000040A0100000000004E22819F9F3704D26D85649F36020902950500000000009A031908199C01009F02060000000000015F2A02015682027C009F1A0201569F03060000000000009F3303E0F1C89F3501229F1E0830383230303230318408A0000003330101019F4104303030309F631030333131303030300000000000000000004041323033353031303032303430323031303038323030323031313930353030383332303030312020001422 000001 000 60000033031204544454144443742 12 报文头 TPDU TPDU决定了终端与系统之间的网络协议. TPDU是一个10位的数字, 实际传输的报文, 有些用ASCII表示这10位数字, 有些用BCD表示 1260000400000144600501 信息类型 这个是信息类型(MTI), 是一个四位的数字, 这里为”0200”, 传输时用BCD表示即为”02h,00h”(如果用ASCII呢？看看上面的内容). 这个四位数字，每一位都有它的意义, 10200 位图(bitmap) 指示哪些域存在 1234&lt;70 24 06 80 20 C0 8A 33&gt; 16进制01110000001001000000011010000000001000001100000010001010001100110111000000100100000001101000000000100000110000001000101000110011 有数据的域: 12345678910111213141516171819h 长度 2 主账号 N..19 最大19位BCD编码左对齐 6230780100013423125 ？3 交易处理码 N6 BCD 文档标注6个0 0000004 交易金额 N12 BCD 00000000001 单位分 ？11 流水号 N6 BCD 00005014 卡有效期 N4 BCD YYMM 261222 服务点输入方式码 N3 BCD 07223 卡序列号 N3 BCD 00025 服务点条件码 N2 BCD 0035 2磁道数据 z37 BCD 6214835892690379D2607220149390048665641 受卡机终端标识码 ans8 ASCII 31 30 30 30 36 30 34 39 -&gt;10006049(终端代码)42 受卡方标识码 ans15 ASCII 31 31 32 33 33 30 31 37 30 31 31 30 30 30 36 -&gt;112330170110006(商户号)49 交易货币代码 an3 ASCII 313536 -&gt;156 (人民币)53 安全控制信息 N16 BCD 060000000000000055 IC 卡数据域 最大255字节数据 5960 22 000001 000 63 自定义域 ans…003 ASCII 60 00 00 64 MAC b64 BINARY what? 160001000000100008000080000000000000430 扫码交易 send 12 扫码交易 rec 160000400006010000201090210303806800AC0813700000000000000000100008223324208200320000100313030303030303030303336434431303030363034393131323333303137303131303030363135360004B3C9B9A600634132303335303130303230343032303130303832303032303131393035303038333230303031202041333031383133343632373432393931353133343436320011900000010000003935463132303332353833384634323546443430343041423844443934413035323037324432453700034355504438304537304439 解析 123456786000040000601000020109 //0210 //30 38 06 80 0A C0 81 37&lt;0011000000111000000001101000000000001010110000001000000100110111&gt;00000000000000000100008223324208200320000100313030303030303030303336434431303030363034393131323333303137303131303030363135360004B3C9B9A600634132303335303130303230343032303130303832303032303131393035303038333230303031202041333031383133343632373432393931353133343436320011900000010000003935463132303332353833384634323546443430343041423844443934413035323037324432453700034355504438304537304439 扫码撤销 send 100E4600501000060320032130102003020048008C0803D000000000000000001000084032000313030303030303030303336313030303630343931313233333031373031313030303631353600374134303332353833384634323546443430343041423844443934413035323037324432453700119200000100000012000001000082008935463033363233333430353546303230355758504159354630343631393038323035463132303332353833384634323546443430343041423844443934413035323037324432453735463135303134303832303233333234324246314539444442 扫码撤销 rec 160000400006010000201090210303804800AC0813F0000000000000000010000842334100820032000313030303030303030303336303031303030363034393131323333303137303131303030363135360008BDD3CAD5B3C9B9A600374134303332353833384634323546443430343041423844443934413035323037324432453700119200000100000012000001000082003935463132303332423245383732414244333230343141414135324338413830323031394242374500034355503937384230413039","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"知识点","slug":"知识点","permalink":"http://joinyon.top/tags/知识点/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"AppBarLayout+CollapsingToolBarLayout+Tablayout+ViewPager使用遇到的问题及解决方案","slug":"AppBarLayout-CollapsingToolBarLayout-Tablayout-ViewPager使用遇到的问题及解决方案","date":"2018-11-18T02:27:37.000Z","updated":"2018-11-20T09:51:19.084Z","comments":true,"path":"2018/11/18/AppBarLayout-CollapsingToolBarLayout-Tablayout-ViewPager使用遇到的问题及解决方案/","link":"","permalink":"http://joinyon.top/2018/11/18/AppBarLayout-CollapsingToolBarLayout-Tablayout-ViewPager使用遇到的问题及解决方案/","excerpt":"","text":"###","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"基础","slug":"基础","permalink":"http://joinyon.top/tags/基础/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"Android项目打包过程","slug":"Android项目打包过程","date":"2018-11-15T01:08:34.000Z","updated":"2018-11-15T01:08:34.806Z","comments":true,"path":"2018/11/15/Android项目打包过程/","link":"","permalink":"http://joinyon.top/2018/11/15/Android项目打包过程/","excerpt":"","text":"","categories":[],"tags":[],"keywords":[]},{"title":"SVN使用","slug":"SVN使用","date":"2018-10-15T09:03:01.000Z","updated":"2018-10-16T09:00:12.541Z","comments":true,"path":"2018/10/15/SVN使用/","link":"","permalink":"http://joinyon.top/2018/10/15/SVN使用/","excerpt":"","text":"前言最近做项目是要和同事协作开发的，于是想到使用svn平时都是一个人开发，使用git,由于项目是托管在svn服务器的，所以了解了一下，拉代码一气呵成，当提及时糟糕了各种冲突，解决不了，只好使用最笨的方式，拷贝代码，于是乎，我想一定要学会使用svn 查看电脑有没有装svn要使用svn必须先安装,mac平台下检测方法：打开终端,输入如下命令:1svn -version 如果已经安装了svn，那么终端控制台会出现如下所示:12svn: invalid option character: eType &apos;svn help&apos; for usage. 如果没有安装,则显示:1command not found 使用 可以使用客户端 可以使用命令 貌似习惯于命令 多多学习，多多益善 AS使用svn添加忽略文件一般要忽略的文件如下： .idea文件夹 .gradle文件夹 所有的build文件夹 所有的.iml文件 local.properties文件 注意 当文件夹已经被添加到svn版本控制仓库中时，添加忽略是无效的解决办法:使用svn清除文件夹的添加状态 实践 码云SVN支持 使用SVN将代码托管到码云 SVN常用命令","categories":[{"name":"技术","slug":"技术","permalink":"http://joinyon.top/categories/技术/"}],"tags":[{"name":"svn","slug":"svn","permalink":"http://joinyon.top/tags/svn/"}],"keywords":[{"name":"技术","slug":"技术","permalink":"http://joinyon.top/categories/技术/"}]},{"title":"Android 屏幕适配浅谈","slug":"Android-屏幕适配浅谈","date":"2018-10-08T09:39:12.000Z","updated":"2018-10-08T09:40:24.719Z","comments":true,"path":"2018/10/08/Android-屏幕适配浅谈/","link":"","permalink":"http://joinyon.top/2018/10/08/Android-屏幕适配浅谈/","excerpt":"","text":"","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"差缺补漏","slug":"差缺补漏","permalink":"http://joinyon.top/tags/差缺补漏/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"Android百度推送遇到的坑","slug":"Android百度推送遇到的坑","date":"2018-09-17T14:53:29.000Z","updated":"2018-09-21T03:20:02.074Z","comments":true,"path":"2018/09/17/Android百度推送遇到的坑/","link":"","permalink":"http://joinyon.top/2018/09/17/Android百度推送遇到的坑/","excerpt":"","text":"集成流程：参考这里 问题：在控制台发送通知，透传消息都能接收的到，但是服务器推送的收不到，why？","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"框架","slug":"框架","permalink":"http://joinyon.top/tags/框架/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"AndroidStudio 多渠道打包","slug":"AndroidStudio-多渠道打包","date":"2018-09-14T09:39:24.000Z","updated":"2018-09-14T09:44:36.258Z","comments":true,"path":"2018/09/14/AndroidStudio-多渠道打包/","link":"","permalink":"http://joinyon.top/2018/09/14/AndroidStudio-多渠道打包/","excerpt":"","text":"多渠道打包一般应用于向不同的应用市场提交app后用来统计不同渠道下载量等一些信息的。 一般集成友盟的sdk,不同的SDK集成方式大同小异。看看原文","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"知识点","slug":"知识点","permalink":"http://joinyon.top/tags/知识点/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"使用云信实现聊天功能","slug":"使用云信实现聊天功能","date":"2018-09-10T06:57:11.000Z","updated":"2018-09-26T02:01:50.971Z","comments":true,"path":"2018/09/10/使用云信实现聊天功能/","link":"","permalink":"http://joinyon.top/2018/09/10/使用云信实现聊天功能/","excerpt":"","text":"查看 逻辑结构：12345678910111213141516171819202122232425262728MainActivity |- HomeFragment |-&gt;MainTab(导航栏) |-SessionListFragment |-RecentContactsFragment |-NimUIKit |-P2PMessageActivity |-Toolbar |-Title(聊天对象名称) |-SubTitle（聊天对象在线状态: 电脑、手机-wifi、移动网络） |-Observer&lt;CustomNotification&gt;: 命令消息接收观察者 |-ContactChangedObserver: UIKit 与 app 好友关系变化监听接口 |-UserInfoObserver: |-OnlineStateChangeObserver:在线状态观察者 |-MessageFragment |-InputPanel:底部文本编辑，语音等模块 |- |- |-TeamMessageActivity |-TeamMessageFragment |-ContactListFragment |-FuncItem:功能区 |-ContactsFragment:通讯录Fragment |-ChatRoomListFragment 相关类继承结构123456789101112131415161718192021222324252627282930313233343536373839UI 相关:View |-SwitchButton:仿iphone 开关按钮 |-LetterIndexView:字母索引选择的ViewImageView |-CircleImageView |-HeadImageViewActivity:AppCompatActivity |-UI(Abs) |-BaseMessageActivity(Abs) |-P2PMessageActivity |-TeamMessageActivityFragment:Fragment |—TFragment |-ChatRoomListFragment（直播间列表） |-TabFragment(Abs) |-ChatRoomTabFragment(Abs) |-MainTabFragment(Abs) |-ChatRoomListFragment(聊天室主TAB页) |-ContactListFragment(集成通讯录列表) |-SessionListFragment(会话列表) |-AckMsgTabFragment(Abs) |-MasterFragment（聊天室主播） |-OnlinePeopleFragment（在线人数） |-RecentContactsFragment(最近联系人列表) |-MessageFragment(聊天界面基类) 源码解析 监听对方输入状态的功能 当输入内容发生变化时显示吐司：对方正在输入中。 监听Ait输入，当输入内容有@符号时显示要Ait的群成员对象。 AitManager 该类实现了TextWatcher 接口","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"框架","slug":"框架","permalink":"http://joinyon.top/tags/框架/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"百度语音合成集成","slug":"百度语音合成集成","date":"2018-09-05T02:28:24.000Z","updated":"2018-09-05T06:11:14.942Z","comments":true,"path":"2018/09/05/百度语音合成集成/","link":"","permalink":"http://joinyon.top/2018/09/05/百度语音合成集成/","excerpt":"","text":"集成准备1 在百度语音的控制台创建一个应用，输入应用的名称、包名等信息。2 进入应用会看到SDK下，选择离在线融合SDK。3 下载解压时一个安卓示例项目，运行打开可以查看逻辑代码。4 将app-lib下的jar包拷贝到自己的项目的app-lib下，然后鼠标右键添加到自己项目的库中。5 将app-src-main下的jniLibs整个文件夹拷贝到自己项目的对应位置，如果自己的项目有了该文件夹，就将jniLibs文件夹下各个文件夹中so库分别复制到对应的文件夹。6 将app-src下的assets文件拷贝到自己项目对应位置，如果自己的项目有了该文件夹，就将assets文件夹下所有文件拷贝到对应文件夹。7 将app-src下的control、listener、util文件夹拷贝到项目中，MainHandlerConstant.Java文件拷贝到项目中。 AndroidMainfest.xml123456789//添加以下权限 &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt; &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt; &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot;/&gt; &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt; &lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;/&gt; &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt; &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt; &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot;/&gt; 官方文档Demo示例","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"框架","slug":"框架","permalink":"http://joinyon.top/tags/框架/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"安卓富文本编辑器开发实践","slug":"安卓富文本编辑器开发实践","date":"2018-08-07T07:31:59.000Z","updated":"2018-09-05T06:11:29.202Z","comments":true,"path":"2018/08/07/安卓富文本编辑器开发实践/","link":"","permalink":"http://joinyon.top/2018/08/07/安卓富文本编辑器开发实践/","excerpt":"","text":"项目结构： assets文件夹下 ZSSRichTextEditor.js文件 editor.css文件 android-editor.html文件（编辑器界面） editor-android.css editor-utils.js editor-utils-formatter.js example example-content.html(示例文件这里可以写一些HTML展示出来) 图片文件（演示加载本地图片） fonts(字体文件资源，改变字体) libs（js类库,可以抽空看边查边看） svg（矢量图) Android目录(经本人整理过) activity EditorExampleActivity MyEditActivity editor JsCallbackReceiver inter EditorMediaUploadListener OnImeBackListener OnJsEditorStateChangedListener legacy EditLinkActivity WPEditImageSpan utils HtmlStyleUtils MyFontColor Utils view EditorFragment EditorFragmentAbstract ImageSettingDialogFragment LegacyEditorFragment MyEditorFragment widget EditorWebView EditorWebViewAbstract EditorWebViewCompatibility HtmlStyleTextWatcher LinkDialogFragment RippleToggleButton SourceViewEditText 项目说明本项目是基于WordPressEditor开发的，目的是用于公司项目中的需求，公司项目需要富文本编辑器，支持图文混排，并生成相应的HTML代码，以便展示在网络中，同时需要支持IOS和安卓编辑，故找到此项目，感谢项目的开发者。 功能 支持HTML代码查看与效果实时预览。 支持链接功能 图片、视频等文件上传及查看 引用功能 有序无序列表 字体粗细、斜体。 下划线，中穿线，上角标、小角标等（可扩展，调用ZSSRichTextEditor.js的方法） 字体大小 对齐方式 颜色（可跟自己需求定义） 还有更多功能待发现 源码解析分析EditorWebViewAbstract支持js回调的webView 点击这里了解更多","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"框架","slug":"框架","permalink":"http://joinyon.top/tags/框架/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"Mac快捷键使用技巧","slug":"Mac快捷键使用技巧","date":"2018-07-06T09:52:36.000Z","updated":"2018-10-17T10:21:41.332Z","comments":true,"path":"2018/07/06/Mac快捷键使用技巧/","link":"","permalink":"http://joinyon.top/2018/07/06/Mac快捷键使用技巧/","excerpt":"","text":"快捷键 查看隐藏文件: shift+command+. 终端命令 返回用户主目录 1echo $HOME 打开文件 1open *** 显示当前目录的路径名 1pwd 进入用户主目录 1cd 或者 cd~ 返回上级目录 1cd .. 返回上两级目录 1cd ../.. mac下adb通常在第一次使用Android SDK中的adb无法使用，有以下提示：1bash: android: command not found 原因：未配置Android的环境变量，so需要为mac中的Android SDK配置环境变量。注意：以下操作可以在Mac自带的终端Terminal，也可以在Android Studio中操作 启动终端 进入当前用户的home目录，在命令行输入： 1echo $HOME 创建.bash_profile文件(如果有则不用重新创建了直接进行下一步，查看的方法是显示隐藏文件)执行命令: 1touch .bash_profile 打开 .bash_profile文件： 1open -e .bash_profile 执行后会自动弹出.bash_profile文件的编辑窗口。如果配置过其他的环境变量应该有内容的，比如我的： export M2_HOME=/Users/zhangjunyang/tools/maven/apache-maven-3.5.0 export PATH=$PATH:$M2_HOME/bin export MYSQL_HOME=/usr/local/mysql export PATH=$PATH:$MYSQL_HOME/bin 在.bash_profile 文件中输入： export PATH=/Users/您的用户名/文件路径/platform-tools/:$PATH注意 如果需要添加多个路径到PATH下时，需要用“:”(英文的冒号)隔开。因为android和adb这些命令是在不同的文件夹中的，格式是：PATH=${PATH}:路径1:路径2、另外，如果指定多个路径，结尾就不用写:$PATH了。例如：export PATH=${PATH}:/Users/zhangjunyang/Library/Android/sdk/platform-tools:/Users/zhangjunyang/Library/Android/sdk/tools","categories":[{"name":"工具","slug":"工具","permalink":"http://joinyon.top/categories/工具/"}],"tags":[{"name":"小技巧","slug":"小技巧","permalink":"http://joinyon.top/tags/小技巧/"}],"keywords":[{"name":"工具","slug":"工具","permalink":"http://joinyon.top/categories/工具/"}]},{"title":"MVP+Dagger2架构+RxJava+Retrofit+OkHttp框架方式一","slug":"MVP-Dagger2架构-RxJava-Retrofit-OkHttp框架方式一","date":"2018-06-29T03:04:38.000Z","updated":"2018-06-29T06:24:00.394Z","comments":true,"path":"2018/06/29/MVP-Dagger2架构-RxJava-Retrofit-OkHttp框架方式一/","link":"","permalink":"http://joinyon.top/2018/06/29/MVP-Dagger2架构-RxJava-Retrofit-OkHttp框架方式一/","excerpt":"","text":"MVP架构介绍目前，Android APP开发最火的架构是MVP，便于产品的更新迭代，为更好理解MVP架构，现对开发中使用的MVP进行总结： Model 对外提供业务数据API 内部实现本地数据，网络数据的存取的等 只有Presenter可以访问，与View隔离 Presenter 持有View对象，对View进行操作 持有Model层提供数据接口对象，可通过依赖注入解耦此部分 从数据接口对象中获取数据并处理，更新View View UI层，包含所有UI相关组件 持有对应的Presenter的对象，可通过依赖注入解耦此部分 由Presenter来负责更新UI 项目结构图如下所示","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"框架","slug":"框架","permalink":"http://joinyon.top/tags/框架/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"AndroidStudio快捷键及使用技巧","slug":"“AndroidStudio快捷键及使用技巧”","date":"2018-06-27T02:24:30.000Z","updated":"2018-12-13T15:04:24.868Z","comments":true,"path":"2018/06/27/“AndroidStudio快捷键及使用技巧”/","link":"","permalink":"http://joinyon.top/2018/06/27/“AndroidStudio快捷键及使用技巧”/","excerpt":"","text":"自动导包，自动删除没有调用的包：打开AndroidStudio界面之后：依次点击 File –&gt; setting –&gt; Editor –&gt; General –&gt;Auto import 当前类/方法被引用的位置查找： 先光标定位到方法或者类 右键选择Find Usages（快捷键 mac:fn+option+F7 win:ctrl+g） 全局搜索 Edit-&gt;find-&gt;find in path 快捷键 shift+command+Fd 查找一个文件的引用fn+option+F7","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"小技巧","slug":"小技巧","permalink":"http://joinyon.top/tags/小技巧/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"学习导航123","slug":"学习导航123","date":"2018-06-23T10:05:05.000Z","updated":"2019-07-09T03:31:42.323Z","comments":true,"path":"2018/06/23/学习导航123/","link":"","permalink":"http://joinyon.top/2018/06/23/学习导航123/","excerpt":"","text":"一个很好的源码解析网站极客导航","categories":[],"tags":[],"keywords":[]},{"title":"区块链开源项目介绍","slug":"区块链开源项目介绍","date":"2018-06-21T11:25:03.000Z","updated":"2018-06-22T06:43:26.373Z","comments":true,"path":"2018/06/21/区块链开源项目介绍/","link":"","permalink":"http://joinyon.top/2018/06/21/区块链开源项目介绍/","excerpt":"","text":"ContentBox组织GitHub BLK.IOgitHub Java版的web3jweb3jweb3j文档","categories":[{"name":"区块链","slug":"区块链","permalink":"http://joinyon.top/categories/区块链/"}],"tags":[{"name":"区块链技术","slug":"区块链技术","permalink":"http://joinyon.top/tags/区块链技术/"}],"keywords":[{"name":"区块链","slug":"区块链","permalink":"http://joinyon.top/categories/区块链/"}]},{"title":"通知总结","slug":"通知总结","date":"2018-06-20T07:46:52.000Z","updated":"2018-06-28T01:29:26.483Z","comments":true,"path":"2018/06/20/通知总结/","link":"","permalink":"http://joinyon.top/2018/06/20/通知总结/","excerpt":"","text":"通知原文 通知系统使得用户得知应用中重要的事情，例如有新信息到来或者日历事件提醒。将通知作为一个新的通道，提醒用户重要的事情或者记录下用户没有注意到的事情。 通知的作用 显示接收到的短消息、即时消息等信息（短信、微信、微博） 显示客户端推送的重要消息（如广告、订阅推荐、新版本发布等） 显示正在进行的程序（如：电影下载进度、音乐播放器、后台运行的程序等） 使用步骤 获取NotificationManager 实例管理通知； 实例Notification 对象； 关联事件Intent； 发送通知； 通知的分类常见的通知有很多，这里以具体实例学习巩固通知的使用过程。 1. 普通通知 获取NotificationManager实例：Notification对通知进行管理，调用Context的getSystemService()方法获取。 1NotificationManager manager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE); 实例Notification对象： 1Notification notification=new Notification.Builder(Context).build(); 此时只是创建了一个空的Notification对象，并没有实际的作用，可以在build()方法之前使用连缀任意多的方法设置Notification对象。如下是进行一些基本的设置1234567Notification notification=new NotificationCompat.Builder(Context).setContentText(\"通知内容\").setContentTitle(\"通知标题\").setSmallIcon(R.mipmap.ic_luncher).setLageIcon(BitmapFactory.decodeResource(getResources(),R.drawable.ic_luncher)).setWen(System.currentTimeMillis()).build(); 以上设置了五个方法： setSmallIcon()用于设置通知的小图标，只能使用纯alpha图层的图片进行设置，小图标会显示在系统状态栏上。（alpha图层的图片可以找UI要）setLargeIcon()设置通知的大图标，当拉下通知后显示的图标。setWhen()指定通知被创建的时间，以毫秒为单位。 关联事件Intent 如果没有关联Intent也是可以的，只是点击的时候没有任何效果，如果在用户点击到时候会跳转到我们指定的页面，那么需要添加一个Intent，此时会用到 PendingIntent ,PendingIntent的获取可以根据需求选择 getActivity(),getBroadcast(),getService()等静态方法 12345Intent intent=new Intent(Intent.ACTION_VIEW,Uri.parse(\"http://joinyon.top\"));PendingInent pendingIntent=PendingIntent.getActivity(this,0,intent,0);Notification notification=new NotificationCompat.Builder(this).setContentIntent(pendingIntent).build(); 调用 setContentIntent()方法，传入PendingIntent实例即可，当点击时会打开浏览器进入我的个人博客主页。我们可以继续完善Notification 12345678Notification notification=new NotificationCompat.Builder(this)....setAutoCancel(true);点击通知头自动取消 .setSound(Uri.parse(\"android.resource://\" + getPackageName() + \"/\" + R.raw.iphone_ringtone))// 声音 //.setLights()// LED //.setVibrate()// 震动 //.setDefaults(NotificationCompat.DEFAULT_ALL)//设置铃声及震动效果 .build(); 注意： 控制手机震动需要加入以下权限1&lt;user-permission android:name=\"android.permission.VIBRATE\"/&gt; 2. 悬挂式通知使用步骤和普通一样，不同的是在调用 .build()之前设置.setFullScreenIntent()方法12345678NotificationCompat.Builder builder=new Notification.Builder(this);Notification notification=builder.setSmallIcon(m.mipmap.ic_launcher_round).setPriority(Notification.PRIORITY_DEFAULT)// 通知的优先级.setCategory(Notification.CATEGORY_MESSAGE)// 通知的类型.setContentTitle(\"悬挂式通知\").setAutoCancel(true)....build(); NOTICEsetPriority()方法共有5个等级： PRIORITY_MIN -最低级别(-2); PRIORITY_LOW -较低级别(-1); PRIORITY_DEFAULT -默认级别(0); PRIORITY_HIGH -较高级别(1); PRIORITY_MAX -最高级别(2); 当发出此类型的通知时，通知会以悬挂的方式显示在屏幕上。 3. 折叠式通知折叠式通知需要借助RemoteViews来实现1234567891011121314151617181920212223242526// 第一步 获取NotificationManager实例 NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(\"http://joinyon.top/\")); PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0); //设置未下拉的样式R.layout.collapsed RemoteViews collapsed = new RemoteViews(getPackageName(), R.layout.collapsed); collapsed.setTextViewText(R.id.collapsed_text, \"关闭状态\"); //设置下拉后的样式TR.layout.show RemoteViews show = new RemoteViews(getPackageName(), R.layout.show); // 第二步 实例Notification对象 NotificationCompat.Builder builder = new NotificationCompat.Builder(this, \"0\"); Notification notification = builder.setAutoCancel(true) .setSmallIcon(R.mipmap.ic_launcher_round) .setLargeIcon(BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher)) .setContentIntent(pendingIntent) .setContentText(\"JoinYon's Blog\") //第三步 .setCustomContentView(collapsed) .setCustomBigContentView(show) .setDefaults(NotificationCompat.DEFAULT_ALL)//设置铃声及震动效果 .build(); //第四步 发送通知 notificationManager.notify(0, notification); 4. 锁屏通知Android 5.0(API level21)开始，通知可以显示在锁屏上，通过设置选择是否允许敏感的通知内容显示在安全的锁屏上。1234//通过设置setVisibility()方法设置即可....setVisibility(VISIBILITY_PUBLIC).build(); setVisibility()方法共有三个选值： VISIBILITY_PRIVATE:显示基本信息，如通知的图标，但隐藏通知的全部内容 VISIBILITY_PUBLIC:显示通知的全部内容 VISIBILITY_SECRET:不显示任何内容，包括图标。 未完待续。。。","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"差缺补漏","slug":"差缺补漏","permalink":"http://joinyon.top/tags/差缺补漏/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"Android图片长按保存实践","slug":"Android图片长按保存实践","date":"2018-06-14T03:37:18.000Z","updated":"2018-06-14T03:37:18.212Z","comments":true,"path":"2018/06/14/Android图片长按保存实践/","link":"","permalink":"http://joinyon.top/2018/06/14/Android图片长按保存实践/","excerpt":"","text":"","categories":[],"tags":[],"keywords":[]},{"title":"git常用命令","slug":"git常用命令","date":"2018-06-11T09:03:01.000Z","updated":"2018-12-27T04:41:21.956Z","comments":true,"path":"2018/06/11/git常用命令/","link":"","permalink":"http://joinyon.top/2018/06/11/git常用命令/","excerpt":"","text":"1. 使用git向远程仓库提交代码添加完SSH key成功之后，我们就有权限向GitHub上我们自己的项目提交代码了，接下来介绍一下提交代码的两种方法： 方法一：clone远程仓库 在GitHub上创建一个项目如：AndroidGuide 并添加README.md文件。 终端cd到某文件夹下，执行一下命令: 1git clone git@github.com:MrRobotter/AndroidGuide.git 这样就把AndroidGuide项目 clone 到了本地，我们可以把 clone 命令理解为高级点的复制,这个时候该项目本身就是一个git仓库了，不需要再执行 git init 进行初始，而且甚至已经关联好了远程仓库，我们只需要在AndroidGuide目录下任意修改或者添加文件，然后进行commit 之后可以执行： 1git push origin master 进行代码提交。 方法二：关联本地已有项目如果我们在本地完成了一个完整的项目test1 这样方法一就不适合了。 在GitHub上建一个test项目， 在终端上cd到项目所在文件夹 接下来执行以下命令： 123git init //初始化版本库git add .//添加文件到版本库（只是添加到了缓存区）, `.` 代表添加文件夹下所有文件git commit -m &quot;提交说明&quot; //把添加的文件提交到版本库，并填写提交备注。 到这一步我们完成了代码库的初始化，但代码仅仅是本地，没有提交到服务器，如果要提交到远程的test则进行一下步骤： 123git remote add origin git@github.com:MrRobotter/test.git //把本地仓库与远程仓库关联git push -u origin master //第一次推送时git push origin master //之后提交 注意在GitHub上创建test一般会选择创建README.md文件，这时候直接使用git push -u origin master会出现以下提示： ! [rejected] master -&gt; master (non-fast-forward) error: failed to push some refs to &#39;git@github.com:MrRobotter/AndroidGuide.git’ hint: Updates were rejected because the tip of your current branch is behind hint: its remote counterpart. Integrate the remote changes (e.g. hint: ‘git pull …’) before pushing again. hint: See the ‘Note about fast-forwards’ in ‘git push –help’ for details. 什么意思呢？是说你远程仓库中有文件没有下载下来。那明白了于是执行命令:1git pull origin master 这时候又出差了： fatal: refusing to merge unrelated histories WTF 怎么回事？查了资料才知道git在2.9.2版本里 认为他们是两个不同的项目，要把两个不同的项目合并需要使用命令：1git pull origin master --allow-unrelated-histories 这样就可以pull成功了。接下来，依次执行1234git add ** //你刚刚拉下来的新文件git commit -m &quot;合并&quot;git push -u origin master //第一次推送时git push origin master //之后提交 这样就解决了。 2. git命令删除远程分支先查看 远程分支1git branch -r 使用以下命令删除远程分支：123git branch -r -d origin/branch-namegit push origin :branch-name 3. git命令删除本地分支1git branch -d develop(replace your branch-name) Android Studio 中.gitignore配置 问题描述 在使用Git进行代码管理过程中，我们会发现后来添加的.gitignore文件，或者中途修改了.gitignore文件后，.gitignore文件并没有生效，需要清除.track缓存和强制.track来解决问题。如果我们在第一次提交的时候，忘记添加.gitignore文件或者在首次添加了.gitignore文件之后，又对文件进行了修改，你会发现这两种情况下，.gitignore文件是不生效的。 原因 git 没有清理cache重点内容 解决方案123git rm -r --cached .git add .git commit -m &quot;commit message&quot; 更多请参考git","categories":[{"name":"技术","slug":"技术","permalink":"http://joinyon.top/categories/技术/"}],"tags":[{"name":"git","slug":"git","permalink":"http://joinyon.top/tags/git/"}],"keywords":[{"name":"技术","slug":"技术","permalink":"http://joinyon.top/categories/技术/"}]},{"title":"AndroidStudio常见编译错误及解决方案","slug":"AndroidStudio常见编译错误及解决方案","date":"2018-06-11T07:54:27.000Z","updated":"2018-09-05T06:05:44.769Z","comments":true,"path":"2018/06/11/AndroidStudio常见编译错误及解决方案/","link":"","permalink":"http://joinyon.top/2018/06/11/AndroidStudio常见编译错误及解决方案/","excerpt":"","text":"问题简介平时运行AndroidStudio编译器，会发生如下错误： Error:Execution failed for task &apos;:app:preDebugAndroidTestBuild&apos;. &gt; Conflict with dependency &apos;com.android.support:support-annotations&apos; in project &apos;:app&apos;. Resolved versions for app (26.1.0) and test app (27.1.1) differ. See https://d.android.com/r/tools/test-apk-dependency-conflicts.html for details. 发生这类问题的原因是：当我们修改了.build 中的 compileSdkVersion，产生所依赖的dependency与当前版本不一样导致的。 解决build-&gt;Rebuild Project","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"Exception","slug":"Exception","permalink":"http://joinyon.top/tags/Exception/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"比特币简介","slug":"比特币简介","date":"2018-06-11T02:29:54.000Z","updated":"2018-06-11T07:08:46.228Z","comments":true,"path":"2018/06/11/比特币简介/","link":"","permalink":"http://joinyon.top/2018/06/11/比特币简介/","excerpt":"","text":"什么是比特币?","categories":[{"name":"区块链","slug":"区块链","permalink":"http://joinyon.top/categories/区块链/"}],"tags":[{"name":"比特币","slug":"比特币","permalink":"http://joinyon.top/tags/比特币/"}],"keywords":[{"name":"区块链","slug":"区块链","permalink":"http://joinyon.top/categories/区块链/"}]},{"title":"GradleForAndroid","slug":"GradleForAndroid","date":"2018-06-11T01:23:47.000Z","updated":"2018-06-11T02:08:14.807Z","comments":true,"path":"2018/06/11/GradleForAndroid/","link":"","permalink":"http://joinyon.top/2018/06/11/GradleForAndroid/","excerpt":"","text":"Gradle for Android 读完本文我可以了解到： Android应用的构建过程 注意点 Android早期的构建工具 Ant Maven Android构建神器：Gradle Gradle的关键概念及构建生命周期 Gradle的两个关键概念：项目和任务 Gradle构建生命周期 Gradle Wrapper 总结 鸣谢 Android应用的构建过程Android应用的构建过程十分复杂，如图所示： 主要有以下几个步骤： 主要的资源文件（layout，values等）都被 aapt 编译，并且在一个R文件中引用 Java代码被Java编译器编译成JVM字节码(.class文件) JVM字节码再被dex工具转换成dalvik字节码（.dex文件） 然后这些.dex文件、编译过的资源文件和其他资源文件（比如图片）会被打包成一个apk apk文件在安装前会被debug/release的key文件签名 安装到设备 注意点 上面步骤中第一步是主要的资源文件，有些特别的资源文件就不会被编译，比如assets目录下的文件，raw目录下的文件以及图片，都不会被编译。只不过raw下的文件会在R文件里生成id 如果对apk正式签名，还需要使用zipalign工具对apk进行对齐操作，这样做的好处是当应用运行时会减少内存的开销 通过上面的了解，Android的构建过程十分复杂，如果每一步都要人工手动去完成的话，是费时费力的，效率太低，于是有了各种各样的构建工具。 Android早期的构建工具在Gradle之前被广泛使用的是Apache Ant和 Maven。 AntAnt 发布于2000年，很快成为Java项目最流行的构建工具。 Ant的优点： 简单、易学，不需要什么特殊的准备就能上手 基于过程式编程思想使得构建非常灵活 后来还能支持插件。 不足之处: 使用XML作为脚本配置格式，除非是很小的项目，否则它的XML文件就很快大得无法管理。MavenMaven 发布于2004年，目前是解决使用Ant所带来的一些问题。 Maven也是使用XML作为构建配置的文件格式，不过文件结构却有了巨大的变化： Ant 需要开发者将执行task所需的全部命令都列出来 Maven 依靠约定并提供现成可调用的目标 不仅如此， Maven 更重要的一个进步是具备从网络上自动下载依赖的能力（后来Ant通过lvy也具备了这个功能），这革命性地改变了我们开发软件的方式。Maven的缺点： 依赖管理不能很好地处理相同库文件不同版本之间的冲突（lvyz在这方面更好一些） XML作为配置文件的格式有严格的结构层次和标准，定制化目标很困难 Maven 主要解决了依赖管理的问题，然而使用XML的错误使他重蹈覆辙，实际上Maven很难写出复杂、定制化的构建脚本，在大型项目中，他经常什么“特别的事儿”还没干就有几百行代码，甚至不如Ant。 前辈们在反省前面两种构建工具的错误之后，提出了DSL（Domain Special Language，领域专用语言）的概念，目标是设计一套能够解决特定领域问题的语言。在构建方面，DSL的一个成功案例就是Gradle。 Android构建神器 Gradle 2012发布的Gradle深刻吸取前面几位前辈的经验和教训，集大家之所成，做了很多的改进。 Gradle有约定优于配置的原则，即为设置和属性提供默认值，这使得他比Ant或者Maven更容易上手。 Gradle构建脚本不再使用XML，而是使用Groovy的DSL进行书写（Groovy是一种基于Java虚拟机的动态语言，因此Android开发者看着会很熟悉），从而使得构建脚本比用Ant和Maven写的更清晰、简洁，下面是实现同样目标的Maven代码和Gradle代码对比: Gradle 既有Ant的强大和灵活性，又有Maven的依赖管理，支持插件且易于使用。因此一推出就获得广泛关注，2013年被Google选为Android Studio的默认构建工具。 Gradle设计的方式使他可以很容易地扩展构建和插入到现有的构建过程中，Google推广Gradle金额Android Studio时，目标是让代码复用、构建variant、配置和定制构建过程变得更加简单。 有人可能担心是否需要专门去学习新语言Groovy，《Gradle for Android》书中专门提到： Groovy代码非常易读，如果你学习过Java，那么学习Groovy的曲线不会陡峭 如果你想构建自己的任务和插件，那么对Groovy有更深次的理解尤为重要 不过因为Groovy是基于Java虚拟机的，所以你完全可以用Java或者其他基于Java虚拟机的语言来编写你的自定义插件。 Gradle的关键概念及构建生命周期Gradle的两个关键概念 项目和任务 项目每个build.gradle脚本构建文件代表一个项目project 任务task构建在脚本里： 每次构建至少包括一个项目，没干嘛项目里又至少包括一个任务。 Gradle构建生命周期一个Gradle构建通常包括下面三个阶段： 初始化 项目实例会在这时被创建，如果这个项目里有多个module，或者依赖多个library，并且他们都有对应的build.gradle文件，就会创建过个项目实例。 配置 在这个阶段构建脚本被执行，并且为每个项目实例创建和配置任务。 执行 在这个阶段Gradle将根据构建脚本配置决定哪些任务会被执行。 不同的任务之间可能有相互依赖，因此在配置阶段Gradle会产生依赖关系图，没有依赖的任务通常会被优先执行，然后一个接一个执行其他任务。一旦一个任务被执行过，就不会被再次执行。 Gradle WrapperGradle在不断的发展，有可能存在新版本不兼容旧版本的情况，于是官网为我们提供了 Gradle Wrapper，就是为了兼容和适配不同版本，确保构建是可重复的。 普通的Gradle脚步命令是： 1gradle ... 而Gradle Wrapper命令只是在gradle 后加个w：1gradlew ... 在Mac下略有不同：1./gradlew ... 开发者或者自动构建系统可以通过使用wapper来运行gradle命令，由它来搞定兼容等问题，因此我们甚至都不需要安装gradle，直接使用gradle wapper即可，就像Android Studio里推荐的一样： 上图所示并没有使用wrapper，是因为当运行gradlew命令时，gradle wrapper 会自动下载所需要但是你没有的gradle版本并使用。 这在多人协作时，很可能因为别人修改了gradle版本，上传到git，然后导致你运行命令时需要下载半天。 不过官方还是推荐使用wrapper，毕竟这样更稳定。 使用 gradle wrapper以后，gradle wrapper 会为每个项目下载一个gradle压缩包，路径在\\User\\yourname.gradle\\wrapper\\dists里： 总结Android Studio 占领市场后，构建工具Gradle的地位无人能敌，我们有必要学习、使用它来为我们创造价值。 摘抄这篇文章能初步了解Gradle的发展过程，它有什么优点，为什么会被广泛使用，有助于后续深入学习Gradle。 鸣谢本文转载自拭心 想了解更多参考： Java Build Tools: Ant vs Maven vs Gradle Why Build Your Java Projects with Gradle Rather than Ant or Maven? Android构建过程简述","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"知识点","slug":"知识点","permalink":"http://joinyon.top/tags/知识点/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"推广链PC上线百度招财猫，免费挖矿","slug":"推广链PC上线百度招财猫，免费挖矿","date":"2018-06-08T07:11:18.000Z","updated":"2018-06-08T07:18:33.470Z","comments":true,"path":"2018/06/08/推广链PC上线百度招财猫，免费挖矿/","link":"","permalink":"http://joinyon.top/2018/06/08/推广链PC上线百度招财猫，免费挖矿/","excerpt":"","text":"","categories":[{"name":"资讯","slug":"资讯","permalink":"http://joinyon.top/categories/资讯/"}],"tags":[{"name":"挖矿","slug":"挖矿","permalink":"http://joinyon.top/tags/挖矿/"}],"keywords":[{"name":"资讯","slug":"资讯","permalink":"http://joinyon.top/categories/资讯/"}]},{"title":"Android基础知识复习(持续更新)","slug":"Android基础知识复习","date":"2018-06-07T12:16:43.000Z","updated":"2019-02-22T06:30:34.283Z","comments":true,"path":"2018/06/07/Android基础知识复习/","link":"","permalink":"http://joinyon.top/2018/06/07/Android基础知识复习/","excerpt":"","text":"Part 1ActivityANR问题 ANR排错一般有三种类型 KeyDispatchTimeout(5 seconds) –主要是类型按键或者触摸事件在特定时间内无响应。 BaroadcastTimeout(10 seconds) –BroadcastReceiver在特定时间内无法处理完成。 ServiceTimeout(20 seconds) –小概率事件Service在特定的时间内无法处理完成。 哪些操作会导致ANR 在主线程执行以下操作： 高耗时的操作，如图像变换 磁盘读写操作，数据库读写操作 大量的创建新对象 如何避免？ UI线程尽量只做跟UI相关的工作 耗时的操作（比如数据库操作，I/O，连接网络或者别的有可能阻塞UI线程的操作）把它放在单独的线程处理 尽量用Handler来处理UIThread和别的Thread之间的交互 解决逻辑 使用AsyncTask 在doInbackground()方法中执行耗时操作 在onPostExecuted()更新UI 使用Handler实现异步任务 在子线程中处理耗时操作 处理完成之后，通过handler.sendMessage()传递处理结果 在handler的handleMessage()方法中更新UI 或者使用handler.post()方法将消息放到Looper中 如何排查 首先分析log 从stace.txt文件查看调用stack，adb pull data/anr/trace.txt./mytraces.txt 看代码 仔细查看ANR的成因（I/O wait? block? memoryleak?） 监测ANR的Watchdog最近出来一个叫LeakCanary的工具 FC(Force Close)什么时候会出现 Error OOM,内存溢出 StackOverFlowError Runtime，比如说空指针异常 解决的办法 注意内存的使用和管理 使用Thread.UncaughtExceptionHandler接口 Android关于OOM的解决方案 OOM 内存溢出(Out Of Memory) 也就是内存占有量超过了VM所分配的最大 出现OOM的原因 加载对象过大 相应的资源过多，来不及释放 如何解决 在内存引用上做些处理，常用的有软引用、强化引用、弱引用 在内存中加载图片时直接在内存中做处理，如边界压缩 动态回收内存 优化Dalvik虚拟机的堆内存分配 自定义堆内存大小 禁止跟随屏幕旋转在清单文件中的Activity添加一下代码：1android:screenOrientation=&quot;portrait&quot; Fragment 的用法及分类 DialogFragment 替代Dialog的解决方案 与JS交互","categories":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}],"tags":[{"name":"差缺补漏","slug":"差缺补漏","permalink":"http://joinyon.top/tags/差缺补漏/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"http://joinyon.top/categories/Android/"}]},{"title":"何为Github Pages?","slug":"何为Github-Pages","date":"2018-06-06T09:02:35.000Z","updated":"2018-06-08T07:06:39.849Z","comments":true,"path":"2018/06/06/何为Github-Pages/","link":"","permalink":"http://joinyon.top/2018/06/06/何为Github-Pages/","excerpt":"","text":"本人在创建自己的Github Pages过程中遇到了种种麻烦，作为一个前端小白，遇到一个小问题要Google上半天，还不一定能一下解决，所以在初步搭建好自己的个人博客主页时，已经迫不及待的要记录下这次搭建的过程。由于本人英文水平不是很高，所以看起英文文档比较吃力，现在我要把自己好不容易读懂的文档翻译过来，方便下次查阅。 GitHub Pages是什么？ GitHub Pages使用指南 使用界限 GitHub Pages是什么？GitHub Pages是一个静态网站托管服务，它可以直接从你的GitHub仓库管理个人、组织或者项目的主页。 我们可以利用Jekyll Theme Chooser在线创建和发布GitHub Pages，如果你更喜欢离线去做，你可以使用GitHub Desktop或者command line来完成。 GitHub Pages是一个静态的站点寄存服务，它不支持服务端的代码，比如：PHP,Ruby,或者Python。 想了解更多不同类型的 GitHub Pages ，请参考用户，组织和项目主页 `警告:` GitHub Pages站点在互联网上是可以被公开的，尽管它的仓库是私有的，如果您有敏感的数据在你的页面仓库，您最好先删 除掉之后再进行发布。 GitHub Pages使用指南> Github Pages站点在2016年6月15日之后使用域名github.io通过HTTPS服务。如果你的站点是在2016年6月15日之前创建的，那么你可以使用支持HTTPS协议保持你的站点可访问。 > Github Pages站点不应该记录敏感信息，比如发送密码或者信用卡账号等内容。 > 当您使用 GitHub Pages 必须服从GitHub服务条款,以及严禁转让该权利。 使用界限Github Pages站点受以下几点使用限制： 使用command line添加一个已经存在的项目到GitHub用户,组织和项目主页","categories":[{"name":"工具","slug":"工具","permalink":"http://joinyon.top/categories/工具/"}],"tags":[{"name":"文档翻译","slug":"文档翻译","permalink":"http://joinyon.top/tags/文档翻译/"}],"keywords":[{"name":"工具","slug":"工具","permalink":"http://joinyon.top/categories/工具/"}]},{"title":"我的第一篇blog","slug":"我的第一篇blog","date":"2018-06-06T08:36:02.000Z","updated":"2018-06-08T07:31:47.634Z","comments":true,"path":"2018/06/06/我的第一篇blog/","link":"","permalink":"http://joinyon.top/2018/06/06/我的第一篇blog/","excerpt":"","text":"为什么要写博客？","categories":[{"name":"生活","slug":"生活","permalink":"http://joinyon.top/categories/生活/"}],"tags":[{"name":"随笔","slug":"随笔","permalink":"http://joinyon.top/tags/随笔/"}],"keywords":[{"name":"生活","slug":"生活","permalink":"http://joinyon.top/categories/生活/"}]},{"title":"Hello World","slug":"hello-world","date":"2018-06-06T03:46:08.436Z","updated":"2018-06-08T07:25:32.050Z","comments":true,"path":"2018/06/06/hello-world/","link":"","permalink":"http://joinyon.top/2018/06/06/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"技术","slug":"技术","permalink":"http://joinyon.top/categories/技术/"}],"tags":[{"name":"随笔","slug":"随笔","permalink":"http://joinyon.top/tags/随笔/"}],"keywords":[{"name":"技术","slug":"技术","permalink":"http://joinyon.top/categories/技术/"}]}]}